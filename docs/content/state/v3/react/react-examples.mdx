---
title: React Examples
---

The examples on this page use [Tailwind CSS](https://tailwindcss.com) for styling and [Framer Motion](https://www.framer.com/motion) for animations. These examples all use the [fine grained reactivity](../fine-grained-reactivity) components so that the parent component renders only once and all renders are optimized to be as small as possible.

## Persisted global state

This example creates a global state object and persists it to Local Storage. Try changing the username and toggling the sidebar and refreshing - it will restore it to the previous state.

<Editor
  code={`
import { observable } from "@legendapp/state"
import { use$ } from "@legendapp/state/react"
import { persistObservable } from "@legendapp/state/persist"

// Create a global state object with persistence
const globalState$ = observable({
  username: 'Guest',
  sidebarOpen: false,
  theme: 'light'
})

// Persist to localStorage (simulated for this demo)
persistObservable(globalState$, {
  local: 'globalState'
})

function PersistenceExample() {
  const username = use$(globalState$.username)
  const sidebarOpen = use$(globalState$.sidebarOpen)
  const theme = use$(globalState$.theme)

  return (
    <div style={{ 
      fontFamily: 'system-ui', 
      padding: '20px',
      backgroundColor: theme === 'dark' ? '#1a1a1a' : '#f5f5f5',
      color: theme === 'dark' ? '#fff' : '#000',
      borderRadius: '8px',
      minHeight: '200px'
    }}>
      <h3>Persisted Global State</h3>
      
      <div style={{ marginBottom: '16px' }}>
        <label>Username: </label>
        <input 
          value={username}
          onChange={e => globalState$.username.set(e.target.value)}
          style={{ 
            marginLeft: '8px', 
            padding: '6px',
            backgroundColor: theme === 'dark' ? '#333' : '#fff',
            color: theme === 'dark' ? '#fff' : '#000',
            border: '1px solid #ccc',
            borderRadius: '4px'
          }}
        />
      </div>

      <div style={{ marginBottom: '16px' }}>
        <label>
          <input 
            type="checkbox"
            checked={sidebarOpen}
            onChange={e => globalState$.sidebarOpen.set(e.target.checked)}
            style={{ marginRight: '8px' }}
          />
          Sidebar Open
        </label>
      </div>

      <div style={{ marginBottom: '16px' }}>
        <label>Theme: </label>
        <select 
          value={theme}
          onChange={e => globalState$.theme.set(e.target.value)}
          style={{ 
            marginLeft: '8px', 
            padding: '6px',
            backgroundColor: theme === 'dark' ? '#333' : '#fff',
            color: theme === 'dark' ? '#fff' : '#000',
            border: '1px solid #ccc',
            borderRadius: '4px'
          }}
        >
          <option value="light">Light</option>
          <option value="dark">Dark</option>
        </select>
      </div>

      {sidebarOpen && (
        <div style={{
          padding: '12px',
          backgroundColor: theme === 'dark' ? '#333' : '#e3f2fd',
          border: \`1px solid \${theme === 'dark' ? '#555' : '#2196f3'}\`,
          borderRadius: '4px',
          marginTop: '16px'
        }}>
          <h4>Sidebar Content</h4>
          <p>Hello {username}! This sidebar state persists.</p>
          <p>Try refreshing the page - your settings will be restored!</p>
        </div>
      )}
    </div>
  )
}`}
  noInline={true}
  renderCode=";render(<PersistenceExample />)"
  previewWidth={400}
/>

## Auto-saving Form

This example uses the [useObservableSyncedQuery](../sync/tanstack-query) hook to create an observable using [TanStack Query](https://tanstack.com/query/) that automatically sends mutations back to the server whenever the observable changes.

It then uses the `Reactive` [two-way binding components](../fine-grained-reactivity#reactive-components) to bind those observable directly to the inputs.

So in effect this binds the inputs directly to your server data.

<Editor
  code={`
import { observable } from "@legendapp/state"
import { use$ } from "@legendapp/state/react"

// Simulated server data and API
const mockServerData = {
  name: 'John Doe',
  email: 'john@example.com',
  bio: 'Software developer passionate about React and state management.'
}

// Create observable form state with initial server data
const formData$ = observable({
  ...mockServerData,
  lastSaved: new Date().toLocaleTimeString(),
  isSaving: false,
  hasUnsavedChanges: false
})

// Simulate auto-save functionality
let saveTimeout = null
const autoSave = () => {
  if (saveTimeout) clearTimeout(saveTimeout)
  
  saveTimeout = setTimeout(() => {
    formData$.isSaving.set(true)
    
    // Simulate API call delay
    setTimeout(() => {
      formData$.assign({
        isSaving: false,
        hasUnsavedChanges: false,
        lastSaved: new Date().toLocaleTimeString()
      })
    }, 1000)
  }, 1500) // Auto-save after 1.5 seconds of no changes
}

// Track changes to trigger auto-save
formData$.name.onChange(() => {
  formData$.hasUnsavedChanges.set(true)
  autoSave()
})

formData$.email.onChange(() => {
  formData$.hasUnsavedChanges.set(true)
  autoSave()
})

formData$.bio.onChange(() => {
  formData$.hasUnsavedChanges.set(true)
  autoSave()
})

function AutoSavingFormExample() {
  const name = use$(formData$.name)
  const email = use$(formData$.email)
  const bio = use$(formData$.bio)
  const lastSaved = use$(formData$.lastSaved)
  const isSaving = use$(formData$.isSaving)
  const hasUnsavedChanges = use$(formData$.hasUnsavedChanges)

  const inputStyle = {
    width: '100%',
    padding: '12px',
    border: '1px solid #ddd',
    borderRadius: '6px',
    fontSize: '14px',
    fontFamily: 'inherit'
  }

  const labelStyle = {
    display: 'block',
    marginBottom: '6px',
    fontWeight: 'bold',
    color: '#333'
  }

  return (
    <div style={{ 
      fontFamily: 'system-ui', 
      padding: '24px', 
      maxWidth: '500px',
      backgroundColor: '#f9f9f9',
      borderRadius: '8px',
      border: '1px solid #e0e0e0'
    }}>
      <div style={{ 
        display: 'flex', 
        justifyContent: 'space-between', 
        alignItems: 'center',
        marginBottom: '20px'
      }}>
        <h3 style={{ margin: 0 }}>Auto-saving Form</h3>
        <div style={{ 
          display: 'flex', 
          alignItems: 'center',
          fontSize: '12px',
          color: '#666'
        }}>
          {isSaving ? (
            <div style={{ display: 'flex', alignItems: 'center' }}>
              <div style={{
                width: '12px',
                height: '12px',
                border: '2px solid #f3f3f3',
                borderTop: '2px solid #007bff',
                borderRadius: '50%',
                animation: 'spin 1s linear infinite',
                marginRight: '6px'
              }}></div>
              Saving...
            </div>
          ) : hasUnsavedChanges ? (
            <span style={{ color: '#ffc107' }}>‚óè Unsaved changes</span>
          ) : (
            <span style={{ color: '#28a745' }}>‚úì Saved at {lastSaved}</span>
          )}
        </div>
      </div>

      <div style={{ marginBottom: '20px' }}>
        <label style={labelStyle}>Name:</label>
        <input
          type="text"
          value={name}
          onChange={e => formData$.name.set(e.target.value)}
          style={inputStyle}
          placeholder="Enter your name"
        />
      </div>

      <div style={{ marginBottom: '20px' }}>
        <label style={labelStyle}>Email:</label>
        <input
          type="email"
          value={email}
          onChange={e => formData$.email.set(e.target.value)}
          style={inputStyle}
          placeholder="Enter your email"
        />
      </div>

      <div style={{ marginBottom: '20px' }}>
        <label style={labelStyle}>Bio:</label>
        <textarea
          value={bio}
          onChange={e => formData$.bio.set(e.target.value)}
          style={{
            ...inputStyle,
            height: '100px',
            resize: 'vertical'
          }}
          placeholder="Tell us about yourself"
        />
      </div>

      <div style={{ 
        fontSize: '12px', 
        color: '#666',
        padding: '12px',
        backgroundColor: '#e9ecef',
        borderRadius: '4px',
        border: '1px solid #ced4da'
      }}>
        <strong>How it works:</strong> This form automatically saves changes to the server 
        1.5 seconds after you stop typing. The observable state is directly bound to the 
        inputs, and changes trigger the auto-save mechanism.
      </div>

      <style>{`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `}</style>
    </div>
  )
}`}
  noInline={true}
  renderCode=";render(<AutoSavingFormExample />)"
  previewWidth={550}
/>

## Form validating

This example uses [useObserve](../react-api#useobserve) to listen to changes in the form state to update the error messages as you type. It waits for the first click of the Save button for a better user experience.

<Editor
  code={`
import { observable } from "@legendapp/state"
import { use$, useObserve } from "@legendapp/state/react"

// Create form state
const formState$ = observable({
  name: '',
  email: '',
  age: '',
  hasTriedSubmit: false
})

// Create computed observables for validation
const errors$ = observable({
  name: () => {
    if (!formState$.hasTriedSubmit.get()) return ''
    const name = formState$.name.get()
    if (!name) return 'Name is required'
    if (name.length < 2) return 'Name must be at least 2 characters'
    return ''
  },
  email: () => {
    if (!formState$.hasTriedSubmit.get()) return ''
    const email = formState$.email.get()
    if (!email) return 'Email is required'
    if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)) return 'Invalid email format'
    return ''
  },
  age: () => {
    if (!formState$.hasTriedSubmit.get()) return ''
    const age = formState$.age.get()
    if (!age) return 'Age is required'
    if (isNaN(Number(age)) || Number(age) < 0 || Number(age) > 120) {
      return 'Age must be a number between 0 and 120'
    }
    return ''
  }
})

function FormValidationExample() {
  const name = use$(formState$.name)
  const email = use$(formState$.email)
  const age = use$(formState$.age)
  const hasTriedSubmit = use$(formState$.hasTriedSubmit)
  
  const nameError = use$(errors$.name)
  const emailError = use$(errors$.email)
  const ageError = use$(errors$.age)

  const handleSubmit = (e) => {
    e.preventDefault()
    formState$.hasTriedSubmit.set(true)
    
    // Check if form is valid
    if (!nameError && !emailError && !ageError) {
      alert('Form submitted successfully!')
      // Reset form
      formState$.assign({
        name: '',
        email: '',
        age: '',
        hasTriedSubmit: false
      })
    }
  }

  const inputStyle = {
    width: '100%',
    padding: '8px',
    border: '1px solid #ccc',
    borderRadius: '4px',
    fontSize: '14px'
  }

  const errorStyle = {
    color: '#dc3545',
    fontSize: '12px',
    marginTop: '4px'
  }

  return (
    <div style={{ fontFamily: 'system-ui', padding: '20px', maxWidth: '400px' }}>
      <h3>Form Validation</h3>
      <p style={{ fontSize: '14px', color: '#666', marginBottom: '20px' }}>
        Validation appears after first submit attempt
      </p>
      
      <form onSubmit={handleSubmit}>
        <div style={{ marginBottom: '16px' }}>
          <label style={{ display: 'block', marginBottom: '4px', fontWeight: 'bold' }}>
            Name:
          </label>
          <input
            type="text"
            value={name}
            onChange={e => formState$.name.set(e.target.value)}
            style={{
              ...inputStyle,
              borderColor: nameError ? '#dc3545' : '#ccc'
            }}
          />
          {nameError && <div style={errorStyle}>{nameError}</div>}
        </div>

        <div style={{ marginBottom: '16px' }}>
          <label style={{ display: 'block', marginBottom: '4px', fontWeight: 'bold' }}>
            Email:
          </label>
          <input
            type="email"
            value={email}
            onChange={e => formState$.email.set(e.target.value)}
            style={{
              ...inputStyle,
              borderColor: emailError ? '#dc3545' : '#ccc'
            }}
          />
          {emailError && <div style={errorStyle}>{emailError}</div>}
        </div>

        <div style={{ marginBottom: '20px' }}>
          <label style={{ display: 'block', marginBottom: '4px', fontWeight: 'bold' }}>
            Age:
          </label>
          <input
            type="number"
            value={age}
            onChange={e => formState$.age.set(e.target.value)}
            style={{
              ...inputStyle,
              borderColor: ageError ? '#dc3545' : '#ccc'
            }}
          />
          {ageError && <div style={errorStyle}>{ageError}</div>}
        </div>

        <button
          type="submit"
          style={{
            backgroundColor: '#007bff',
            color: 'white',
            padding: '10px 20px',
            border: 'none',
            borderRadius: '4px',
            cursor: 'pointer',
            fontSize: '14px',
            fontWeight: 'bold'
          }}
        >
          Save
        </button>
      </form>
    </div>
  )
}`}
  noInline={true}
  renderCode=";render(<FormValidationExample />)"
  previewWidth={450}
/>

## List of messages

This example uses the [syncedFetch](../sync/fetch) helper to get data from a server as an observable, [useComputed](../react-api#usecomputed) to create a computed observable, and [For](../fine-grained-reactivity#for) to display the array of messages in a high-performance way.

<Editor
  code={`
import { observable } from "@legendapp/state"
import { use$, For } from "@legendapp/state/react"

// Simulate server data
const mockMessages = [
  { id: 1, user: 'Alice', message: 'Hello everyone!', timestamp: '10:30 AM' },
  { id: 2, user: 'Bob', message: 'How is everyone doing?', timestamp: '10:32 AM' },
  { id: 3, user: 'Charlie', message: 'Great to see you all here', timestamp: '10:35 AM' },
  { id: 4, user: 'Diana', message: 'Anyone up for a coffee break?', timestamp: '10:38 AM' }
]

// Create observable state
const messagesState$ = observable({
  messages: mockMessages,
  filter: '',
  newMessage: '',
  currentUser: 'You'
})

// Computed observable for filtered messages
const filteredMessages$ = observable(() => {
  const messages = messagesState$.messages.get()
  const filter = messagesState$.filter.get().toLowerCase()
  
  if (!filter) return messages
  
  return messages.filter(msg => 
    msg.user.toLowerCase().includes(filter) || 
    msg.message.toLowerCase().includes(filter)
  )
})

function MessageItem({ item }) {
  const message = use$(item)
  
  return (
    <div style={{
      padding: '12px',
      marginBottom: '8px',
      backgroundColor: '#f8f9fa',
      borderRadius: '8px',
      border: '1px solid #dee2e6'
    }}>
      <div style={{ 
        display: 'flex', 
        justifyContent: 'space-between', 
        alignItems: 'center',
        marginBottom: '4px'
      }}>
        <strong style={{ color: '#495057' }}>{message.user}</strong>
        <span style={{ fontSize: '12px', color: '#6c757d' }}>
          {message.timestamp}
        </span>
      </div>
      <div style={{ color: '#212529' }}>{message.message}</div>
    </div>
  )
}

function MessageListExample() {
  const filter = use$(messagesState$.filter)
  const newMessage = use$(messagesState$.newMessage)
  const filteredMessages = use$(filteredMessages$)
  const currentUser = use$(messagesState$.currentUser)

  const addMessage = (e) => {
    e.preventDefault()
    if (!newMessage.trim()) return
    
    const newMsg = {
      id: Date.now(),
      user: currentUser,
      message: newMessage,
      timestamp: new Date().toLocaleTimeString([], { 
        hour: '2-digit', 
        minute: '2-digit' 
      })
    }
    
    messagesState$.messages.push(newMsg)
    messagesState$.newMessage.set('')
  }

  return (
    <div style={{ 
      fontFamily: 'system-ui', 
      padding: '20px', 
      maxWidth: '500px',
      backgroundColor: '#fff',
      borderRadius: '8px',
      border: '1px solid #dee2e6'
    }}>
      <h3 style={{ marginTop: 0, marginBottom: '20px' }}>Message List</h3>
      
      {/* Filter input */}
      <div style={{ marginBottom: '16px' }}>
        <input
          type="text"
          placeholder="Filter messages..."
          value={filter}
          onChange={e => messagesState$.filter.set(e.target.value)}
          style={{
            width: '100%',
            padding: '8px 12px',
            border: '1px solid #ced4da',
            borderRadius: '4px',
            fontSize: '14px'
          }}
        />
      </div>

      {/* Messages list */}
      <div style={{ 
        maxHeight: '300px', 
        overflowY: 'auto',
        marginBottom: '16px',
        border: '1px solid #dee2e6',
        borderRadius: '4px',
        padding: '12px'
      }}>
        <For each={filteredMessages$} item={MessageItem} />
        {filteredMessages.length === 0 && (
          <div style={{ 
            textAlign: 'center', 
            color: '#6c757d', 
            fontStyle: 'italic',
            padding: '20px'
          }}>
            No messages found
          </div>
        )}
      </div>

      {/* Add message form */}
      <form onSubmit={addMessage} style={{ display: 'flex', gap: '8px' }}>
        <input
          type="text"
          placeholder="Type your message..."
          value={newMessage}
          onChange={e => messagesState$.newMessage.set(e.target.value)}
          style={{
            flex: 1,
            padding: '8px 12px',
            border: '1px solid #ced4da',
            borderRadius: '4px',
            fontSize: '14px'
          }}
        />
        <button
          type="submit"
          style={{
            backgroundColor: '#007bff',
            color: 'white',
            padding: '8px 16px',
            border: 'none',
            borderRadius: '4px',
            cursor: 'pointer',
            fontSize: '14px',
            fontWeight: 'bold'
          }}
        >
          Send
        </button>
      </form>
      
      <div style={{ 
        fontSize: '12px', 
        color: '#6c757d', 
        marginTop: '8px',
        textAlign: 'center'
      }}>
        {filteredMessages.length} message(s) shown
      </div>
    </div>
  )
}`}
  noInline={true}
  renderCode=";render(<MessageListExample />)"
  previewWidth={550}
/>

## Animations with reactive props

This example uses [reactive](../fine-grained-reactivity#reactive) to make a version of `motion.div` with [reactive props](../fine-grained-reactivity#reactive-components) that can animate using observable values. Animating with reactive props is faster than re-rendering the whole component because when the tracked observable changes it triggers a render of only the `motion.div`, so it doesn't need to re-render the parent or children.

This example also creates a [computed observable](../usage/observable#computed-observables) text value from the boolean and renders it directly in JSX, which (under the hood) creates a reactive text element that re-renders itself when it changes.

<Editor
  code={`
import { observable } from "@legendapp/state"
import { use$ } from "@legendapp/state/react"

// Create observable state for the animated switch
const switchState$ = observable({
  isOn: false,
  scale: 1,
  rotation: 0
})

// Computed observable for text based on switch state
const statusText$ = observable(() => {
  return switchState$.isOn.get() ? 'ON' : 'OFF'
})

// Computed observable for dynamic styling
const switchStyle$ = observable(() => {
  const isOn = switchState$.isOn.get()
  const scale = switchState$.scale.get()
  const rotation = switchState$.rotation.get()
  
  return {
    transform: \`scale(\${scale}) rotate(\${rotation}deg)\`,
    backgroundColor: isOn ? '#28a745' : '#6c757d',
    borderColor: isOn ? '#28a745' : '#6c757d'
  }
})

function AnimatedSwitchExample() {
  const isOn = use$(switchState$.isOn)
  const statusText = use$(statusText$)
  const switchStyle = use$(switchStyle$)

  const toggle = () => {
    switchState$.isOn.set(!isOn)
    
    // Add animation effects
    switchState$.scale.set(1.1)
    switchState$.rotation.set(isOn ? 0 : 180)
    
    // Reset scale after animation
    setTimeout(() => {
      switchState$.scale.set(1)
    }, 200)
  }

  const handleMouseEnter = () => {
    if (!isOn) {
      switchState$.scale.set(1.05)
    }
  }

  const handleMouseLeave = () => {
    switchState$.scale.set(1)
  }

  return (
    <div style={{ 
      fontFamily: 'system-ui', 
      padding: '40px', 
      textAlign: 'center',
      backgroundColor: '#f8f9fa',
      borderRadius: '12px',
      border: '1px solid #dee2e6'
    }}>
      <h3 style={{ marginBottom: '30px' }}>Animated Switch with Reactive Props</h3>
      
      <div style={{ marginBottom: '40px' }}>
        <button
          onClick={toggle}
          onMouseEnter={handleMouseEnter}
          onMouseLeave={handleMouseLeave}
          style={{
            width: '120px',
            height: '60px',
            borderRadius: '30px',
            border: '3px solid',
            cursor: 'pointer',
            fontSize: '18px',
            fontWeight: 'bold',
            color: 'white',
            transition: 'all 0.3s ease',
            ...switchStyle
          }}
        >
          {statusText}
        </button>
      </div>

      <div style={{ 
        display: 'flex', 
        justifyContent: 'center', 
        gap: '20px',
        marginBottom: '30px'
      }}>
        <div style={{
          padding: '12px 20px',
          backgroundColor: isOn ? '#d4edda' : '#f8d7da',
          color: isOn ? '#155724' : '#721c24',
          borderRadius: '6px',
          border: \`1px solid \${isOn ? '#c3e6cb' : '#f5c6cb'}\`,
          transition: 'all 0.3s ease'
        }}>
          Status: <strong>{statusText}</strong>
        </div>
        
        <div style={{
          padding: '12px 20px',
          backgroundColor: '#e2e3e5',
          color: '#383d41',
          borderRadius: '6px',
          border: '1px solid #d6d8db'
        }}>
          Clicks: <strong>{isOn ? 'Activated' : 'Deactivated'}</strong>
        </div>
      </div>

      <div style={{
        maxWidth: '400px',
        margin: '0 auto',
        padding: '16px',
        backgroundColor: '#e9ecef',
        borderRadius: '6px',
        fontSize: '14px',
        color: '#495057',
        lineHeight: '1.5'
      }}>
        <strong>Reactive Props Demo:</strong> This example shows how observables can drive 
        animations and styling. The button's style, color, and text all update reactively 
        when the observable state changes, with smooth CSS transitions for visual feedback.
      </div>

      <style>{`
        button:hover {
          box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        button:active {
          transform: scale(0.95) !important;
        }
      `}</style>
    </div>
  )
}`}
  noInline={true}
  renderCode=";render(<AnimatedSwitchExample />)"
  previewWidth={500}
/>

## Persistence with animations

This example shows:

1. State persisted to local storage
2. Reactive components

<Editor
  code={`
import { observable } from "@legendapp/state"
import { use$ } from "@legendapp/state/react"
import { persistObservable } from "@legendapp/state/persist"

// Create animated persistent state
const animatedState$ = observable({
  count: 0,
  color: '#007bff',
  size: 1,
  isAnimating: false,
  showParticles: false
})

// Persist the state (simulated for demo)
persistObservable(animatedState$, {
  local: 'animatedState'
})

function PersistenceWithAnimationsExample() {
  const count = use$(animatedState$.count)
  const color = use$(animatedState$.color)
  const size = use$(animatedState$.size)
  const isAnimating = use$(animatedState$.isAnimating)
  const showParticles = use$(animatedState$.showParticles)

  const increment = () => {
    // Trigger animation
    animatedState$.isAnimating.set(true)
    animatedState$.showParticles.set(true)
    animatedState$.size.set(1.3)
    
    // Update count
    animatedState$.count.set(count + 1)
    
    // Cycle through colors
    const colors = ['#007bff', '#28a745', '#ffc107', '#dc3545', '#6f42c1']
    const nextColor = colors[count % colors.length]
    animatedState$.color.set(nextColor)
    
    // Reset animations
    setTimeout(() => {
      animatedState$.size.set(1)
      animatedState$.isAnimating.set(false)
    }, 300)
    
    setTimeout(() => {
      animatedState$.showParticles.set(false)
    }, 1000)
  }

  const reset = () => {
    animatedState$.assign({
      count: 0,
      color: '#007bff',
      size: 1,
      isAnimating: false,
      showParticles: false
    })
  }

  return (
    <div style={{ 
      fontFamily: 'system-ui', 
      padding: '40px', 
      textAlign: 'center',
      backgroundColor: '#f8f9fa',
      borderRadius: '12px',
      border: '1px solid #dee2e6',
      position: 'relative',
      overflow: 'hidden'
    }}>
      <h3 style={{ marginBottom: '30px' }}>Persistence with Animations</h3>
      
      {/* Particle effect */}
      {showParticles && (
        <div style={{
          position: 'absolute',
          top: '50%',
          left: '50%',
          transform: 'translate(-50%, -50%)',
          pointerEvents: 'none',
          zIndex: 1
        }}>
          {[...Array(8)].map((_, i) => (
            <div
              key={i}
              style={{
                position: 'absolute',
                width: '8px',
                height: '8px',
                backgroundColor: color,
                borderRadius: '50%',
                animation: \`particle-\${i} 1s ease-out forwards\`
              }}
            />
          ))}
        </div>
      )}
      
      <div style={{ 
        marginBottom: '40px',
        position: 'relative',
        zIndex: 2
      }}>
        <div
          style={{
            display: 'inline-flex',
            alignItems: 'center',
            justifyContent: 'center',
            width: '120px',
            height: '120px',
            backgroundColor: color,
            borderRadius: '50%',
            color: 'white',
            fontSize: '32px',
            fontWeight: 'bold',
            transform: \`scale(\${size})\`,
            transition: 'all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55)',
            boxShadow: isAnimating ? '0 8px 25px rgba(0,0,0,0.3)' : '0 4px 15px rgba(0,0,0,0.2)',
            cursor: 'pointer'
          }}
          onClick={increment}
        >
          {count}
        </div>
      </div>

      <div style={{ 
        display: 'flex', 
        justifyContent: 'center', 
        gap: '15px',
        marginBottom: '30px'
      }}>
        <button
          onClick={increment}
          style={{
            backgroundColor: color,
            color: 'white',
            padding: '12px 24px',
            border: 'none',
            borderRadius: '25px',
            cursor: 'pointer',
            fontSize: '16px',
            fontWeight: 'bold',
            transition: 'all 0.2s ease',
            boxShadow: '0 2px 10px rgba(0,0,0,0.2)'
          }}
        >
          Click me! (+1)
        </button>
        
        <button
          onClick={reset}
          style={{
            backgroundColor: '#6c757d',
            color: 'white',
            padding: '12px 24px',
            border: 'none',
            borderRadius: '25px',
            cursor: 'pointer',
            fontSize: '16px',
            fontWeight: 'bold',
            transition: 'all 0.2s ease'
          }}
        >
          Reset
        </button>
      </div>

      <div style={{ 
        display: 'grid', 
        gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))',
        gap: '15px',
        marginBottom: '30px'
      }}>
        <div style={{
          padding: '12px',
          backgroundColor: 'white',
          borderRadius: '8px',
          border: '1px solid #dee2e6'
        }}>
          <div style={{ fontSize: '12px', color: '#6c757d' }}>Count</div>
          <div style={{ fontSize: '18px', fontWeight: 'bold', color: color }}>{count}</div>
        </div>
        
        <div style={{
          padding: '12px',
          backgroundColor: 'white',
          borderRadius: '8px',
          border: '1px solid #dee2e6'
        }}>
          <div style={{ fontSize: '12px', color: '#6c757d' }}>Color</div>
          <div style={{ 
            fontSize: '18px', 
            fontWeight: 'bold',
            color: color
          }}>
            {color}
          </div>
        </div>
        
        <div style={{
          padding: '12px',
          backgroundColor: 'white',
          borderRadius: '8px',
          border: '1px solid #dee2e6'
        }}>
          <div style={{ fontSize: '12px', color: '#6c757d' }}>Size</div>
          <div style={{ fontSize: '18px', fontWeight: 'bold' }}>{size.toFixed(1)}x</div>
        </div>
      </div>

      <div style={{
        maxWidth: '400px',
        margin: '0 auto',
        padding: '16px',
        backgroundColor: '#e9ecef',
        borderRadius: '6px',
        fontSize: '14px',
        color: '#495057',
        lineHeight: '1.5'
      }}>
        <strong>Persistent Animations:</strong> This counter persists to localStorage and 
        includes animated feedback when clicked. The state (count, color, size) is restored 
        when you refresh the page, demonstrating how animations can work with persistence.
      </div>

      <style>{`
        @keyframes particle-0 { to { transform: translate(0, -40px); opacity: 0; } }
        @keyframes particle-1 { to { transform: translate(28px, -28px); opacity: 0; } }
        @keyframes particle-2 { to { transform: translate(40px, 0); opacity: 0; } }
        @keyframes particle-3 { to { transform: translate(28px, 28px); opacity: 0; } }
        @keyframes particle-4 { to { transform: translate(0, 40px); opacity: 0; } }
        @keyframes particle-5 { to { transform: translate(-28px, 28px); opacity: 0; } }
        @keyframes particle-6 { to { transform: translate(-40px, 0); opacity: 0; } }
        @keyframes particle-7 { to { transform: translate(-28px, -28px); opacity: 0; } }
        
        button:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
      `}</style>
    </div>
  )
}`}
  noInline={true}
  renderCode=";render(<PersistenceWithAnimationsExample />)"
  previewWidth={550}
/>

## Show a modal with multiple pages

This example uses [Show](../fine-grained-reactivity#show) to show/hide a modal based on an observable value, and [Switch](../fine-grained-reactivity#switch) to render the active page in the modal.

<Editor
  code={`
import { observable } from "@legendapp/state"
import { use$, Show, Switch } from "@legendapp/state/react"

// Modal state
const modalState$ = observable({
  isOpen: false,
  currentPage: 'welcome'
})

function ModalExample() {
  const isOpen = use$(modalState$.isOpen)
  const currentPage = use$(modalState$.currentPage)

  const openModal = (page = 'welcome') => {
    modalState$.currentPage.set(page)
    modalState$.isOpen.set(true)
  }

  const closeModal = () => {
    modalState$.isOpen.set(false)
  }

  const goToPage = (page) => {
    modalState$.currentPage.set(page)
  }

  return (
    <div style={{ fontFamily: 'system-ui', padding: '20px' }}>
      <h3>Modal with Multiple Pages</h3>
      
      <div style={{ marginBottom: '20px' }}>
        <button
          onClick={() => openModal('welcome')}
          style={{
            backgroundColor: '#007bff',
            color: 'white',
            padding: '10px 20px',
            border: 'none',
            borderRadius: '4px',
            cursor: 'pointer',
            marginRight: '10px'
          }}
        >
          Open Welcome
        </button>
        <button
          onClick={() => openModal('settings')}
          style={{
            backgroundColor: '#28a745',
            color: 'white',
            padding: '10px 20px',
            border: 'none',
            borderRadius: '4px',
            cursor: 'pointer',
            marginRight: '10px'
          }}
        >
          Open Settings
        </button>
        <button
          onClick={() => openModal('profile')}
          style={{
            backgroundColor: '#ffc107',
            color: 'black',
            padding: '10px 20px',
            border: 'none',
            borderRadius: '4px',
            cursor: 'pointer'
          }}
        >
          Open Profile
        </button>
      </div>

      <Show if={modalState$.isOpen}>
        <div style={{
          position: 'fixed',
          top: 0,
          left: 0,
          right: 0,
          bottom: 0,
          backgroundColor: 'rgba(0, 0, 0, 0.5)',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center',
          zIndex: 1000
        }}>
          <div style={{
            backgroundColor: 'white',
            borderRadius: '8px',
            padding: '24px',
            minWidth: '400px',
            maxWidth: '500px',
            position: 'relative',
            boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'
          }}>
            <button
              onClick={closeModal}
              style={{
                position: 'absolute',
                top: '12px',
                right: '12px',
                background: 'none',
                border: 'none',
                fontSize: '24px',
                cursor: 'pointer',
                color: '#666'
              }}
            >
              √ó
            </button>

            <Switch value={modalState$.currentPage}>
              {{
                welcome: (
                  <div>
                    <h2>Welcome!</h2>
                    <p>Welcome to our application. We're glad to have you here.</p>
                    <div style={{ marginTop: '20px' }}>
                      <button
                        onClick={() => goToPage('settings')}
                        style={{
                          backgroundColor: '#28a745',
                          color: 'white',
                          padding: '8px 16px',
                          border: 'none',
                          borderRadius: '4px',
                          cursor: 'pointer',
                          marginRight: '10px'
                        }}
                      >
                        Go to Settings
                      </button>
                      <button
                        onClick={() => goToPage('profile')}
                        style={{
                          backgroundColor: '#ffc107',
                          color: 'black',
                          padding: '8px 16px',
                          border: 'none',
                          borderRadius: '4px',
                          cursor: 'pointer'
                        }}
                      >
                        View Profile
                      </button>
                    </div>
                  </div>
                ),
                settings: (
                  <div>
                    <h2>Settings</h2>
                    <div style={{ marginBottom: '16px' }}>
                      <label style={{ display: 'block', marginBottom: '8px' }}>
                        <input type="checkbox" style={{ marginRight: '8px' }} />
                        Enable notifications
                      </label>
                      <label style={{ display: 'block', marginBottom: '8px' }}>
                        <input type="checkbox" style={{ marginRight: '8px' }} />
                        Dark mode
                      </label>
                      <label style={{ display: 'block', marginBottom: '8px' }}>
                        <input type="checkbox" style={{ marginRight: '8px' }} />
                        Auto-save
                      </label>
                    </div>
                    <div style={{ marginTop: '20px' }}>
                      <button
                        onClick={() => goToPage('welcome')}
                        style={{
                          backgroundColor: '#007bff',
                          color: 'white',
                          padding: '8px 16px',
                          border: 'none',
                          borderRadius: '4px',
                          cursor: 'pointer',
                          marginRight: '10px'
                        }}
                      >
                        Back to Welcome
                      </button>
                      <button
                        onClick={() => goToPage('profile')}
                        style={{
                          backgroundColor: '#ffc107',
                          color: 'black',
                          padding: '8px 16px',
                          border: 'none',
                          borderRadius: '4px',
                          cursor: 'pointer'
                        }}
                      >
                        View Profile
                      </button>
                    </div>
                  </div>
                ),
                profile: (
                  <div>
                    <h2>User Profile</h2>
                    <div style={{ marginBottom: '16px' }}>
                      <div style={{ marginBottom: '8px' }}>
                        <strong>Name:</strong> John Doe
                      </div>
                      <div style={{ marginBottom: '8px' }}>
                        <strong>Email:</strong> john@example.com
                      </div>
                      <div style={{ marginBottom: '8px' }}>
                        <strong>Role:</strong> Developer
                      </div>
                      <div style={{ marginBottom: '8px' }}>
                        <strong>Joined:</strong> January 2024
                      </div>
                    </div>
                    <div style={{ marginTop: '20px' }}>
                      <button
                        onClick={() => goToPage('welcome')}
                        style={{
                          backgroundColor: '#007bff',
                          color: 'white',
                          padding: '8px 16px',
                          border: 'none',
                          borderRadius: '4px',
                          cursor: 'pointer',
                          marginRight: '10px'
                        }}
                      >
                        Back to Welcome
                      </button>
                      <button
                        onClick={() => goToPage('settings')}
                        style={{
                          backgroundColor: '#28a745',
                          color: 'white',
                          padding: '8px 16px',
                          border: 'none',
                          borderRadius: '4px',
                          cursor: 'pointer'
                        }}
                      >
                        Go to Settings
                      </button>
                    </div>
                  </div>
                )
              }}
            </Switch>
          </div>
        </div>
      </Show>
    </div>
  )
}`}
  noInline={true}
  renderCode=";render(<ModalExample />)"
  previewWidth={600}
/>

## Router

<Editor
  code={`
import { observable } from "@legendapp/state"
import { use$, Switch } from "@legendapp/state/react"

// Router state management
const router$ = observable({
  currentRoute: 'home',
  params: {},
  history: ['home']
})

// Routes configuration
const routes = {
  home: { title: 'Home', component: 'HomePage' },
  about: { title: 'About', component: 'AboutPage' },
  products: { title: 'Products', component: 'ProductsPage' },
  contact: { title: 'Contact', component: 'ContactPage' },
  profile: { title: 'Profile', component: 'ProfilePage' }
}

function RouterExample() {
  const currentRoute = use$(router$.currentRoute)
  const history = use$(router$.history)

  const navigate = (route) => {
    router$.currentRoute.set(route)
    router$.history.push(route)
  }

  const goBack = () => {
    if (history.length > 1) {
      const newHistory = [...history]
      newHistory.pop() // Remove current
      const previousRoute = newHistory[newHistory.length - 1]
      router$.assign({
        currentRoute: previousRoute,
        history: newHistory
      })
    }
  }

  const isActive = (route) => currentRoute === route

  return (
    <div style={{ 
      fontFamily: 'system-ui', 
      padding: '20px',
      backgroundColor: '#f8f9fa',
      borderRadius: '8px',
      border: '1px solid #dee2e6'
    }}>
      <h3 style={{ marginBottom: '20px' }}>Simple Router Example</h3>
      
      {/* Navigation */}
      <nav style={{
        marginBottom: '20px',
        padding: '16px',
        backgroundColor: 'white',
        borderRadius: '6px',
        border: '1px solid #dee2e6'
      }}>
        <div style={{ 
          display: 'flex', 
          gap: '8px', 
          flexWrap: 'wrap',
          marginBottom: '12px'
        }}>
          {Object.entries(routes).map(([route, config]) => (
            <button
              key={route}
              onClick={() => navigate(route)}
              style={{
                backgroundColor: isActive(route) ? '#007bff' : '#e9ecef',
                color: isActive(route) ? 'white' : '#495057',
                padding: '8px 16px',
                border: 'none',
                borderRadius: '4px',
                cursor: 'pointer',
                fontSize: '14px',
                fontWeight: isActive(route) ? 'bold' : 'normal',
                transition: 'all 0.2s ease'
              }}
            >
              {config.title}
            </button>
          ))}
        </div>
        
        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
          <button
            onClick={goBack}
            disabled={history.length <= 1}
            style={{
              backgroundColor: history.length > 1 ? '#6c757d' : '#e9ecef',
              color: history.length > 1 ? 'white' : '#6c757d',
              padding: '6px 12px',
              border: 'none',
              borderRadius: '4px',
              cursor: history.length > 1 ? 'pointer' : 'not-allowed',
              fontSize: '12px'
            }}
          >
            ‚Üê Back
          </button>
          
          <div style={{ fontSize: '12px', color: '#6c757d' }}>
            Route: <code style={{ 
              backgroundColor: '#e9ecef', 
              padding: '2px 6px', 
              borderRadius: '3px' 
            }}>
              /{currentRoute}
            </code>
          </div>
        </div>
      </nav>

      {/* Route Content */}
      <div style={{
        minHeight: '200px',
        padding: '24px',
        backgroundColor: 'white',
        borderRadius: '6px',
        border: '1px solid #dee2e6'
      }}>
        <Switch value={router$.currentRoute}>
          {{
            home: (
              <div>
                <h2>üè† Welcome Home</h2>
                <p>This is the home page of our application.</p>
                <div style={{ marginTop: '16px' }}>
                  <button
                    onClick={() => navigate('about')}
                    style={{
                      backgroundColor: '#28a745',
                      color: 'white',
                      padding: '8px 16px',
                      border: 'none',
                      borderRadius: '4px',
                      cursor: 'pointer',
                      marginRight: '8px'
                    }}
                  >
                    Learn About Us
                  </button>
                  <button
                    onClick={() => navigate('products')}
                    style={{
                      backgroundColor: '#ffc107',
                      color: 'black',
                      padding: '8px 16px',
                      border: 'none',
                      borderRadius: '4px',
                      cursor: 'pointer'
                    }}
                  >
                    View Products
                  </button>
                </div>
              </div>
            ),
            about: (
              <div>
                <h2>‚ÑπÔ∏è About Us</h2>
                <p>We're a company focused on building amazing user experiences with reactive state management.</p>
                <ul style={{ marginTop: '16px' }}>
                  <li>Founded in 2024</li>
                  <li>Specializing in React applications</li>
                  <li>Passionate about developer experience</li>
                </ul>
                <button
                  onClick={() => navigate('contact')}
                  style={{
                    backgroundColor: '#007bff',
                    color: 'white',
                    padding: '8px 16px',
                    border: 'none',
                    borderRadius: '4px',
                    cursor: 'pointer',
                    marginTop: '16px'
                  }}
                >
                  Get in Touch
                </button>
              </div>
            ),
            products: (
              <div>
                <h2>üì¶ Our Products</h2>
                <div style={{ 
                  display: 'grid', 
                  gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',
                  gap: '16px',
                  marginTop: '16px'
                }}>
                  {['Legend State', 'Legend List', 'Legend Motion'].map((product, i) => (
                    <div key={product} style={{
                      padding: '16px',
                      backgroundColor: '#f8f9fa',
                      borderRadius: '6px',
                      border: '1px solid #dee2e6'
                    }}>
                      <h4 style={{ margin: '0 0 8px 0' }}>{product}</h4>
                      <p style={{ margin: 0, fontSize: '14px', color: '#6c757d' }}>
                        Product description here
                      </p>
                    </div>
                  ))}
                </div>
              </div>
            ),
            contact: (
              <div>
                <h2>üìû Contact Us</h2>
                <div style={{ marginTop: '16px' }}>
                  <p><strong>Email:</strong> hello@example.com</p>
                  <p><strong>Phone:</strong> (555) 123-4567</p>
                  <p><strong>Address:</strong> 123 React Street, State City, JS 12345</p>
                </div>
                <button
                  onClick={() => navigate('profile')}
                  style={{
                    backgroundColor: '#6f42c1',
                    color: 'white',
                    padding: '8px 16px',
                    border: 'none',
                    borderRadius: '4px',
                    cursor: 'pointer',
                    marginTop: '16px'
                  }}
                >
                  View Profile
                </button>
              </div>
            ),
            profile: (
              <div>
                <h2>üë§ User Profile</h2>
                <div style={{ 
                  display: 'flex', 
                  gap: '20px',
                  marginTop: '16px',
                  alignItems: 'flex-start'
                }}>
                  <div style={{
                    width: '80px',
                    height: '80px',
                    backgroundColor: '#007bff',
                    borderRadius: '50%',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    color: 'white',
                    fontSize: '24px',
                    fontWeight: 'bold'
                  }}>
                    JD
                  </div>
                  <div>
                    <h4 style={{ margin: '0 0 8px 0' }}>John Doe</h4>
                    <p style={{ margin: 0, color: '#6c757d' }}>Software Developer</p>
                    <p style={{ margin: '8px 0 0 0', fontSize: '14px' }}>
                      Joined: January 2024
                    </p>
                  </div>
                </div>
              </div>
            )
          }}
        </Switch>
      </div>

      {/* Route History */}
      <div style={{
        marginTop: '20px',
        padding: '12px',
        backgroundColor: '#e9ecef',
        borderRadius: '4px',
        fontSize: '12px',
        color: '#495057'
      }}>
        <strong>Navigation History:</strong> {history.join(' ‚Üí ')}
      </div>
    </div>
  )
}`}
  noInline={true}
  renderCode=";render(<RouterExample />)"
  previewWidth={600}
/>

<Callout>
These examples are interactive demonstrations that would typically include live code editors and previews. In the original documentation, they were implemented as Astro components with embedded examples.
</Callout>