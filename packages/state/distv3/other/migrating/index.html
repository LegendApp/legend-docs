<!DOCTYPE html><html lang="en" dir="ltr" data-has-toc data-has-sidebar data-theme="dark" class="astro-bguv2lll"> <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Migrating | Legend State</title><link rel="canonical"/><link rel="shortcut icon" href="/open-source/state/v3/favicon.ico" type="image/x-icon"/><meta name="generator" content="Astro v4.5.4"/><meta name="generator" content="Starlight v0.21.1"/><meta property="og:title" content="Migrating"/><meta property="og:type" content="article"/><meta property="og:url"/><meta property="og:locale" content="en"/><meta property="og:description"/><meta property="og:site_name" content="Legend State"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Migrating"/><meta name="twitter:description"/><script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg> <svg aria-hidden="true" class="dark astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg> <svg aria-hidden="true" class="auto astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> </template><link rel="stylesheet" href="/open-source/state/v3/_astro/index.CfuZhGlD.css" />
<style>svg:where(.astro-c6vsoqas){color:var(--sl-icon-color);font-size:var(--sl-icon-size, 1em);width:1em;height:1em}
</style><script type="module" src="/open-source/state/v3/_astro/hoisted.BlkZlIN9.js"></script>
<script type="module" src="/open-source/state/v3/_astro/page.CZ0TFQCk.js"></script></head> <body class="astro-bguv2lll"> <a href="#_top" class="astro-7q3lir66">Skip to content</a>  <div class="page sl-flex astro-vrdttmbt"> <header class="header astro-vrdttmbt"><div class="header sl-flex astro-kmkmnagf"> <div class="title-wrapper sl-flex astro-kmkmnagf"> <a href="/open-source/state/v3/" class="site-title sl-flex astro-m46x6ez3">  <span class="astro-m46x6ez3"> Legend State </span> </a>  </div> <div class="sl-flex astro-kmkmnagf"> <site-search data-translations="{&#34;placeholder&#34;:&#34;Search&#34;}" class="astro-v37mnknz"> <button data-open-modal disabled class="astro-v37mnknz">  <svg aria-label="Search" class="astro-v37mnknz astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z"/></svg>  <span class="sl-hidden md:sl-block astro-v37mnknz" aria-hidden="true">Search</span> <svg aria-label="(Press / to Search)" class="sl-hidden md:sl-block astro-v37mnknz astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 2H7a5 5 0 0 0-5 5v10a5 5 0 0 0 5 5h10a5 5 0 0 0 5-5V7a5 5 0 0 0-5-5Zm3 15a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v10Z"/><path d="M15.293 6.707a1 1 0 1 1 1.414 1.414l-8.485 8.486a1 1 0 0 1-1.414-1.415l8.485-8.485Z"/></svg>  </button> <dialog style="padding:0" aria-label="Search" class="astro-v37mnknz"> <div class="dialog-frame sl-flex astro-v37mnknz">  <button data-close-modal class="sl-flex md:sl-hidden astro-v37mnknz"> Cancel </button> <div class="search-container astro-v37mnknz"> <div id="starlight__search" class="astro-v37mnknz"></div> </div> </div> </dialog> </site-search>    </div> <div class="sl-hidden md:sl-flex right-group astro-kmkmnagf"> <div class="sl-flex social-icons astro-kmkmnagf"> <a href="https://github.com/LegendApp/legend-state" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>  <select value="auto" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected="true" class="astro-4yphtoen">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div> </div> </header> <nav class="sidebar astro-vrdttmbt" aria-label="Main"> <starlight-menu-button class="astro-jif73yzw"> <button aria-expanded="false" aria-label="Menu" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-jif73yzw"> <svg aria-hidden="true" class="astro-jif73yzw astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg>  </button> </starlight-menu-button>    <div id="starlight__sidebar" class="sidebar-pane astro-vrdttmbt"> <div class="sidebar-content sl-flex astro-vrdttmbt"> <ul class="top-level astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Intro</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/open-source/state/v3/intro/introduction/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Introductionv3</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/open-source/state/v3/intro/getting-started/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Getting Started</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/open-source/state/v3/intro/fast/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Fast ðŸ”¥</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/open-source/state/v3/intro/why/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Why</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Usage</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/open-source/state/v3/usage/observable/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Observable</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/open-source/state/v3/usage/reactivity/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Reactivity</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/open-source/state/v3/usage/configuring/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Configuring</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/open-source/state/v3/usage/helper-functions/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Helper Functions</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">React</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/open-source/state/v3/react/react-introduction/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">React Introduction</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/open-source/state/v3/react/react-api/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">React API</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/open-source/state/v3/react/fine-grained-reactivity/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Fine Grained Reactivity</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/open-source/state/v3/react/helpers-and-hooks/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Helpers and Hooks</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/open-source/state/v3/react/tracing/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tracing</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/open-source/state/v3/react/react-examples/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">React Examples</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Guides</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/open-source/state/v3/guides/persistence/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Persistence</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/open-source/state/v3/guides/performance/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Performance</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/open-source/state/v3/guides/patterns/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Patterns</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Other</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/open-source/state/v3/other/other-frameworks/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Other Frameworks</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/open-source/state/v3/other/experiments/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Experiments</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/open-source/state/v3/other/migrating/" aria-current="page" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Migrating</span>  </a> </li> </ul>  </details> </li> </ul>  <div class="md:sl-hidden"> <div class="mobile-preferences sl-flex astro-wu23bvmt"> <div class="sl-flex social-icons astro-wu23bvmt"> <a href="https://github.com/LegendApp/legend-state" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>  <select value="auto" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected="true" class="astro-4yphtoen">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div>  </div> </div> </div> </nav> <div class="main-frame astro-vrdttmbt">  <div class="lg:sl-flex astro-67yu43on"> <aside class="right-sidebar-container astro-67yu43on"> <div class="right-sidebar astro-67yu43on"> <div class="lg:sl-hidden astro-pb3aqygn"><mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-doynk5tl"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-doynk5tl"><details id="starlight__mobile-toc" class="astro-doynk5tl"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-doynk5tl"><div class="toggle sl-flex astro-doynk5tl">On this page<svg aria-hidden="true" class="caret astro-doynk5tl astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </div><span class="display-current astro-doynk5tl"></span></summary><div class="dropdown astro-doynk5tl"><ul class="isMobile astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#1x-to-20" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">1.x to 2.0</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#promise-behavior-changed" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Promise behavior changed</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#enablelegendstatereact-enablereactdirectrender--memo" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">enableLegendStateReact, enableReactDirectRender =&gt; Memo</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#legend-components-changed-to-reactive-components" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Legend components changed to Reactive components</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#for-parameter-name-changed" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">For parameter name changed</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#reactive-props-changed-to-start-with" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Reactive props changed to start with $</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#persistence-changes" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Persistence Changes</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#observer-reactive-reactiveobserver-not-exported-from-react-components" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">observer, reactive, reactiveObserver not exported from react-components</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#typesdts-moved-to-typesbabeldts" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">types.d.ts moved to types/babel.d.ts</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#afterbatch-removed" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">afterBatch removed</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#023-to-10" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.23 to 1.0</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#onchange-changed" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">onChange changed</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#when-and-show-tweaked" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">when and Show tweaked</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#indexeddb-preloader-removed" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">IndexedDB preloader removed</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#022-to-023" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.22 to 0.23</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#setting-an-observable-object-to-the-same-value-no-longer-notifies" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Setting an observable object to the same value no longer notifies</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#not-automatically-treating-dom-nodes-and-react-elements-as-opaque-objects" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Not automatically treating DOM nodes and React elements as opaque objects</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#indexeddb-plugin-support-for-non-dictionaries-removed" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">IndexedDB plugin support for non-dictionaries removed</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#021-to-022" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.21 to 0.22</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#local-storage-is-no-longer-the-default-persistence" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Local Storage is no longer the default persistence</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#moved-persist-plugins-to-persist-plugins" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Moved persist plugins to /persist-plugins</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#when-is-not-triggered-by-empty--or" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">when is not triggered by empty  or []</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#020-to-021" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.20 to 0.21</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#changed-onchange-callback" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Changed onChange callback</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#renamed-react-components-from-legend-to-legend" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Renamed React components from legend to Legend</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#019-to-020" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.19 to 0.20</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#removed-deprecated-automatic-observing" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Removed deprecated automatic observing</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#observe-and-useobserve" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">observe and useObserve</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#renamed-event-dispatch-to-fire" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Renamed event dispatch to fire</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#018-to-019" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.18 to 0.19</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#deprecated-automatic-observing" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Deprecated automatic observing</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#bindable-components-deprecated" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Bindable components deprecated</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#value-is-no-longer-exposed" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">value is no longer exposed</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#removed-getfalse" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Removed get(false)</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#017-to-018" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.17 to 0.18</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#016-to-017" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.16 to 0.17</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#primitives-are-now-returned-as-observables" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Primitives are now returned as observables</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#hooks-renamed" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Hooks renamed</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#015-to-016" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.15 to 0.16</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#enablelegendstatereact-to-observe-removed-observer" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">enableLegendStateReact() to observe, removed observer</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#014-to-015" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.14 to 0.15</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#safety" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Safety</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#renamed-ref-to-obs" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Renamed ref to obs</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#array-optimizations" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Array optimizations</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#shallow" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Shallow</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#batching" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Batching</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#change-functions--observewhen" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Change functions =&gt; observe/when</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#primitive-current--value" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Primitive current =&gt; value</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#renamed-observablecomputed-and-observableevent" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Renamed observableComputed and observableEvent</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#renamed-ls-to-bindable" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Renamed LS to Bindable</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#renamed-isolate-to-computed" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Renamed Isolate to Computed</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#removed-memo-and-isolate-props" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Removed memo and isolate props</span> </a>  </li> </ul>  </li> </ul> </div></details></nav></mobile-starlight-toc></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-pb3aqygn"><div class="sl-container astro-pb3aqygn"><starlight-toc data-min-h="2" data-max-h="3"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">On this page</h2><ul class="astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#1x-to-20" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">1.x to 2.0</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#promise-behavior-changed" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Promise behavior changed</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#enablelegendstatereact-enablereactdirectrender--memo" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">enableLegendStateReact, enableReactDirectRender =&gt; Memo</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#legend-components-changed-to-reactive-components" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Legend components changed to Reactive components</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#for-parameter-name-changed" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">For parameter name changed</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#reactive-props-changed-to-start-with" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Reactive props changed to start with $</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#persistence-changes" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Persistence Changes</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#observer-reactive-reactiveobserver-not-exported-from-react-components" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">observer, reactive, reactiveObserver not exported from react-components</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#typesdts-moved-to-typesbabeldts" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">types.d.ts moved to types/babel.d.ts</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#afterbatch-removed" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">afterBatch removed</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#023-to-10" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.23 to 1.0</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#onchange-changed" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">onChange changed</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#when-and-show-tweaked" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">when and Show tweaked</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#indexeddb-preloader-removed" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">IndexedDB preloader removed</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#022-to-023" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.22 to 0.23</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#setting-an-observable-object-to-the-same-value-no-longer-notifies" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Setting an observable object to the same value no longer notifies</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#not-automatically-treating-dom-nodes-and-react-elements-as-opaque-objects" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Not automatically treating DOM nodes and React elements as opaque objects</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#indexeddb-plugin-support-for-non-dictionaries-removed" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">IndexedDB plugin support for non-dictionaries removed</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#021-to-022" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.21 to 0.22</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#local-storage-is-no-longer-the-default-persistence" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Local Storage is no longer the default persistence</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#moved-persist-plugins-to-persist-plugins" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Moved persist plugins to /persist-plugins</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#when-is-not-triggered-by-empty--or" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">when is not triggered by empty  or []</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#020-to-021" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.20 to 0.21</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#changed-onchange-callback" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Changed onChange callback</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#renamed-react-components-from-legend-to-legend" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Renamed React components from legend to Legend</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#019-to-020" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.19 to 0.20</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#removed-deprecated-automatic-observing" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Removed deprecated automatic observing</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#observe-and-useobserve" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">observe and useObserve</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#renamed-event-dispatch-to-fire" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Renamed event dispatch to fire</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#018-to-019" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.18 to 0.19</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#deprecated-automatic-observing" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Deprecated automatic observing</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#bindable-components-deprecated" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Bindable components deprecated</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#value-is-no-longer-exposed" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">value is no longer exposed</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#removed-getfalse" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Removed get(false)</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#017-to-018" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.17 to 0.18</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#016-to-017" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.16 to 0.17</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#primitives-are-now-returned-as-observables" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Primitives are now returned as observables</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#hooks-renamed" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Hooks renamed</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#015-to-016" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.15 to 0.16</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#enablelegendstatereact-to-observe-removed-observer" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">enableLegendStateReact() to observe, removed observer</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#014-to-015" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">0.14 to 0.15</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#safety" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Safety</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#renamed-ref-to-obs" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Renamed ref to obs</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#array-optimizations" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Array optimizations</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#shallow" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Shallow</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#batching" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Batching</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#change-functions--observewhen" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Change functions =&gt; observe/when</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#primitive-current--value" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Primitive current =&gt; value</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#renamed-observablecomputed-and-observableevent" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Renamed observableComputed and observableEvent</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#renamed-ls-to-bindable" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Renamed LS to Bindable</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#renamed-isolate-to-computed" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Renamed Isolate to Computed</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#removed-memo-and-isolate-props" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Removed memo and isolate props</span> </a>  </li> </ul>  </li> </ul> </nav></starlight-toc></div></div> </div> </aside> <div class="main-pane astro-67yu43on">  <main data-pagefind-body lang="en" dir="ltr" class="astro-bguv2lll">    <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <h1 id="_top" class="astro-j6tvhyss">Migrating</h1>  </div> </div>  <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <div class="sl-markdown-content"> <h2 id="1x-to-20">1.x to 2.0</h2>
<p>Version 2.0 removes old deprecated features to reduce bundle size and encourage everyone to move over to the new features. Version 1.11 displays deprecation warnings to help you migrate.</p>
<p>So there are two migration strategies:</p>
<ol>
<li><strong>Runtime</strong>: Upgrade to version 1.11 and check the console for warnings whenever using deprecated features. This can give you time to do the migration slowly without breaking anything.</li>
<li><strong>Build time</strong>: Upgrade to version 2.0 and use TypeScript warnings to find errors</li>
</ol>
<p>These are all things that were changed over time between 1.0 and 2.0 so depending on when you started using Legend-State you may already be doing it the new way.</p>
<h3 id="promise-behavior-changed">Promise behavior changed</h3>
<p>When setting a Promise into an observable it creates a <code dir="auto">state</code> child on the observable with <code dir="auto">isLoaded</code> and <code dir="auto">error</code> properties that you can check for load state. After it resolves or rejects it replaces itself with the resolved value and updates the <code dir="auto">state</code>. Previously in the case of an error it would replace itself with an <code dir="auto">{ error }</code> object.</p>
<p>So if you had logic to check whether a Promise errored by checking the <code dir="auto">error</code> property on the observable, you can change that to <code dir="auto">.state.error</code>.</p>
<h3 id="enablelegendstatereact-enablereactdirectrender--memo">enableLegendStateReact, enableReactDirectRender =&gt; Memo</h3>
<p>The direct rendering enabled by <code dir="auto">enableLegendStateReact</code> and <code dir="auto">enableReactDirectRender</code> was fragile, hard to find in files, and the React team advised against it. So instead we are using the <code dir="auto">Memo</code> component. See <a href="../../react/fine-grained-reactivity/#render-an-observableselector-directly">Render an observable directly</a> for more details.</p>
<p>To migrate you can remove usage of <code dir="auto">enableLegendStateReact()</code> or <code dir="auto">enableReactDirectRender()</code> as well as any usage of direct rendering, and replace it with <code dir="auto">Memo</code>. When you remove those imports it will stop overriding the types so rendering observables directly will result in TypeScript errors.</p>
<p>If you were using <code dir="auto">enableLegendStateReact</code> to render direct observables heavily, <a href="../../usage/configuring#enablereactdirectrender-deprecated">enableReactDirectRender</a> is still usable to ease migration, though it will throw TypeScript errors to help you migrate away. It will be fully removed in version 3.0.</p>
<div class="expressive-code"><link rel="stylesheet" href="/open-source/state/v3/_astro/ec.d6kn2.css"/><script type="module" src="/open-source/state/v3/_astro/ec.dy9ns.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// Remove these:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">enableLegendStateReact</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">enableLegendStateReact</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">Component</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">text$</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">useObservable</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">test</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8D46B4">return</span><span style="--0:#D6DEEB;--1:#403F53"> (</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#8D46B4">&lt;&gt;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">Change this: </span><span style="--0:#DD6B68;--1:#B73936">{</span><span style="--0:#D7DBE0;--1:#403F53">text$</span><span style="--0:#DD6B68;--1:#B73936">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">To this: </span><span style="--0:#7FDBCA;--1:#8D46B4">&lt;</span><span style="--0:#F78C6C;--1:#AA0982">Memo</span><span style="--0:#7FDBCA;--1:#8D46B4">&gt;</span><span style="--0:#DD6B68;--1:#B73936">{</span><span style="--0:#D7DBE0;--1:#403F53">text$</span><span style="--0:#DD6B68;--1:#B73936">}</span><span style="--0:#7FDBCA;--1:#8D46B4">&lt;/</span><span style="--0:#F78C6C;--1:#AA0982">Memo</span><span style="--0:#7FDBCA;--1:#8D46B4">&gt;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#8D46B4">&lt;/&gt;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// Remove these:enableLegendStateReact();enableLegendStateReact();function Component() {  const text$ = useObservable(&#34;test&#34;);  return (    <>      Change this: {text$}      To this: <Memo>{text$}</Memo>    </>  );}"><div></div></button></div></figure></div>
<h3 id="legend-components-changed-to-reactive-components">Legend components changed to Reactive components</h3>
<p>The reactive components are now better named and more easily customizable with configuration functions, exported from the normal <code dir="auto">/react</code> path. See <a href="../../react/fine-grained-reactivity/#reactive-components">Reactive components</a> for more details.</p>
<p>Change:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// React</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> { Legend } </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state/react-components</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">Component</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8D46B4">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#8D46B4">&lt;</span><span style="--0:#F78C6C;--1:#AA0982">Legend.div</span><span style="--0:#7FDBCA;--1:#8D46B4">&gt;</span><span style="--0:#D6DEEB;--1:#403F53">...</span><span style="--0:#7FDBCA;--1:#8D46B4">&lt;/</span><span style="--0:#F78C6C;--1:#AA0982">Legend.div</span><span style="--0:#7FDBCA;--1:#8D46B4">&gt;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// React Native</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> { Legend } </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state/react-native-components</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">Component</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8D46B4">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#8D46B4">&lt;</span><span style="--0:#F78C6C;--1:#AA0982">Legend.View</span><span style="--0:#7FDBCA;--1:#8D46B4">&gt;</span><span style="--0:#D6DEEB;--1:#403F53">...</span><span style="--0:#7FDBCA;--1:#8D46B4">&lt;/</span><span style="--0:#F78C6C;--1:#AA0982">Legend.View</span><span style="--0:#7FDBCA;--1:#8D46B4">&gt;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// Reactimport { Legend } from &#34;@legendapp/state/react-components&#34;;function Component() {  return <Legend.div>...</Legend.div>;}// React Nativeimport { Legend } from &#34;@legendapp/state/react-native-components&#34;;function Component() {  return <Legend.View>...</Legend.View>;}"><div></div></button></div></figure></div>
<p>To:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// React</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> { enableReactComponents } </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state/config/enableReactComponents</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">enableReactComponents</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// React Native</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> { enableReactNativeComponents } </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state/config/enableReactNativeComponents</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">enableReactNativeComponents</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// Now you can use them anywhere</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> { Reactive } </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state/react</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">Component</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#809191;--1:#5E6578">// React</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8D46B4">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#8D46B4">&lt;</span><span style="--0:#F78C6C;--1:#AA0982">Reactive.div</span><span style="--0:#7FDBCA;--1:#8D46B4">&gt;</span><span style="--0:#D6DEEB;--1:#403F53">...</span><span style="--0:#7FDBCA;--1:#8D46B4">&lt;/</span><span style="--0:#F78C6C;--1:#AA0982">Reactive.div</span><span style="--0:#7FDBCA;--1:#8D46B4">&gt;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#809191;--1:#5E6578">// React Native</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8D46B4">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#8D46B4">&lt;</span><span style="--0:#F78C6C;--1:#AA0982">Reactive.View</span><span style="--0:#7FDBCA;--1:#8D46B4">&gt;</span><span style="--0:#D6DEEB;--1:#403F53">...</span><span style="--0:#7FDBCA;--1:#8D46B4">&lt;/</span><span style="--0:#F78C6C;--1:#AA0982">Reactive.View</span><span style="--0:#7FDBCA;--1:#8D46B4">&gt;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// Reactimport { enableReactComponents } from &#34;@legendapp/state/config/enableReactComponents&#34;;enableReactComponents();// React Nativeimport { enableReactNativeComponents } from &#34;@legendapp/state/config/enableReactNativeComponents&#34;;enableReactNativeComponents();// Now you can use them anywhereimport { Reactive } from &#34;@legendapp/state/react&#34;;function Component() {  // React  return <Reactive.div>...</Reactive.div>;  // React Native  return <Reactive.View>...</Reactive.View>;}"><div></div></button></div></figure></div>
<h3 id="for-parameter-name-changed">For parameter name changed</h3>
<p>As weâ€™ve been adopting a convention of naming observables suffixed with <code dir="auto">$</code>, many users were confused by the <code dir="auto">item</code> prop in the render component used in Forâ€™s <code dir="auto">item</code> prop, so we renamed it to <code dir="auto">item$</code> to make it clear that itâ€™s an observable. <code dir="auto">item</code> will still work until version 3.0, but it will throw TypeScript errors to encourage changing it to <code dir="auto">item$</code>.</p>
<h3 id="reactive-props-changed-to-start-with">Reactive props changed to start with $</h3>
<p>In an earlier version reactive props ended with $ and were changed in version 1.3.0 to allow starting with $, because it has a better UX with autocomplete and is easier to visually scan for. Both have been supported but version 2.0 will remove type support for the suffix version. It will still work in code so it doesnâ€™t break your apps, but we will fully remove it in 3.0 and suggest you at least start using the new pattern.</p>
<p>A recommended way to find and replace all of instances of the old method is to find <code dir="auto">$=</code> in all files.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">Component</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">text$</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">useObservable</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">test</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8D46B4">return</span><span style="--0:#D6DEEB;--1:#403F53"> (</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#8D46B4">&lt;</span><span style="--0:#F78C6C;--1:#AA0982">Reactive.div</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#809191;--1:#5E6578">// Change this</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#C5E478;--1:#3C63B3">className$</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#DD6B68;--1:#B73936">{</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--1:#8D46B4"><span style="--0:#7FDBCA"> </span><span style="--0:#C792EA">=&gt;</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">...</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#DD6B68;--1:#B73936">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#809191;--1:#5E6578">// to this</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#C5E478;--1:#3C63B3">$className</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#DD6B68;--1:#B73936">{</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--1:#8D46B4"><span style="--0:#7FDBCA"> </span><span style="--0:#C792EA">=&gt;</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">...</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#DD6B68;--1:#B73936">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#7FDBCA;--1:#8D46B4">    </span></span><span style="--0:#7FDBCA;--1:#8D46B4">&gt;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">...</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#8D46B4">&lt;/</span><span style="--0:#F78C6C;--1:#AA0982">Reactive.div</span><span style="--0:#7FDBCA;--1:#8D46B4">&gt;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="function Component() {  const text$ = useObservable(&#34;test&#34;);  return (    <Reactive.div      // Change this      className$={() => &#34;...&#34;}      // to this      $className={() => &#34;...&#34;}    >      ...    </Reactive.div>  );}"><div></div></button></div></figure></div>
<h3 id="persistence-changes">Persistence Changes</h3>
<p>In version 2 we locked down and cleaned up the interfaces for the remote persistence APIs.</p>
<h4 id="persistobservable-returns-an-object-with-sync-state">persistObservable returns an object with sync state</h4>
<p>To support taking an initial state or an observable, <code dir="auto">persistObservable</code> needs to return both an observable and the syncState, so it now the observable with a <code dir="auto">state</code> property on it, matching the Promise behavior.</p>
<p>See <a href="../../guides/persistence#persistobservable">persistObservable</a> for details.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const { </span><span style="--0:#82AAFF;--1:#3C63B3">state</span><span style="--0:#C792EA;--1:#8D46B4"> } = </span><span style="--0:#82AAFF;--1:#3C63B3">persistObservable</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">initialStateOrObservable</span></span><span style="--0:#C792EA;--1:#8D46B4">, { </span><span style="--0:#7FDBCA;--1:#097174">...</span><span style="--0:#C792EA;--1:#8D46B4"> }</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const { state } = persistObservable(initialStateOrObservable, { ... })"><div></div></button></div></figure></div>
<h4 id="persistlocal--pluginlocal">persistLocal =&gt; pluginLocal</h4>
<p>We renamed the parameters for clarity as the difference between <code dir="auto">local</code> and <code dir="auto">persistLocal</code> wasnâ€™t clear. So it is now named <code dir="auto">pluginLocal</code> because that makes more sense.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">persistObservable</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">initialStateOrObservable</span><span style="--0:#D6DEEB">, {</span></span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#809191;--1:#5E6578">// Before</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">persistLocal: </span><span style="--0:#D7DBE0;--1:#403F53">ObservablePersistLocalStorage</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#809191;--1:#5E6578">// After</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#403F53">    </span></span><span style="--0:#D7DBE0;--1:#403F53">pluginLocal</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#D7DBE0;--1:#403F53">ObservablePersistLocalStorage</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53"> </span></span><span style="--0:#D6DEEB;--1:#403F53">})</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="persistObservable(initialStateOrObservable, {    // Before    persistLocal: ObservablePersistLocalStorage    // After    pluginLocal: ObservablePersistLocalStorage })"><div></div></button></div></figure></div>
<h4 id="remote-options-renamed">Remote options renamed</h4>
<p>Since there were not any remote persistence plugins before, these changes would likely not affect you unless you made your own. See <a href="../../guides/persistence#remote-persistence">Remote Persistence</a> for details.</p>
<h3 id="observer-reactive-reactiveobserver-not-exported-from-react-components">observer, reactive, reactiveObserver not exported from react-components</h3>
<p>The <code dir="auto">/react-components</code> export was mistakenly exporting <code dir="auto">observer</code>, <code dir="auto">reactive</code>, and <code dir="auto">reactiveObserver</code> which are already exported from <code dir="auto">/react</code>. Your editor may have automatically imported from <code dir="auto">/react-components</code> so may need to be changed.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// Change this:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">observer,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">reactive,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">reactiveObserver,</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">} </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state/react-components</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// To this:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> { observer, reactive, reactiveObserver } </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state/react</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// Change this:import {  observer,  reactive,  reactiveObserver,} from &#34;@legendapp/state/react-components&#34;;// To this:import { observer, reactive, reactiveObserver } from &#34;@legendapp/state/react&#34;;"><div></div></button></div></figure></div>
<h3 id="typesdts-moved-to-typesbabeldts">types.d.ts moved to types/babel.d.ts</h3>
<p><code dir="auto">types.d.ts</code> was too generic of a name now that we have a lot of configuration options, so we are naming them more specifically in a â€œtypesâ€ folder. For now thereâ€™s still only the <code dir="auto">babel</code> types but this gives room to add more in the future.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// Change this:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">/// </span><span style="--1:#8D46B4"><span style="--0:#7FDBCA">&lt;</span><span style="--0:#CAECE6">reference </span></span><span style="--0:#C5E478;--1:#3C63B3">types</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state/types</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--1:#8D46B4"><span style="--0:#CAECE6"> </span><span style="--0:#7FDBCA">/&gt;</span></span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// To this:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671">/// </span><span style="--1:#8D46B4"><span style="--0:#7FDBCA">&lt;</span><span style="--0:#CAECE6">reference </span></span><span style="--0:#C5E478;--1:#3C63B3">types</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state/types/babel</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--1:#8D46B4"><span style="--0:#CAECE6"> </span><span style="--0:#7FDBCA">/&gt;</span></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// Change this:/// <reference types=&#34;@legendapp/state/types&#34; />// To this:/// <reference types=&#34;@legendapp/state/types/babel&#34; />"><div></div></button></div></figure></div>
<h3 id="afterbatch-removed">afterBatch removed</h3>
<p><code dir="auto">afterBatch</code> was not working 100% correctly in all cases, and the best way to fix it was to make it part of <code dir="auto">batch(...)</code>.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// Change</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">beginBatch</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">afterBatch</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=&gt;</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#097174">console</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">log</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">done</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">obs$</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">set</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#FF5874;--1:#A54A4A">true</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">endBatch</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// To</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">batch</span><span style="--0:#D6DEEB;--1:#403F53">(</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=&gt;</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#097174">obs$</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">set</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#FF5874;--1:#A54A4A">true</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=&gt;</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#097174">console</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">log</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">done</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// ChangebeginBatch();afterBatch(() => {  console.log(&#34;done&#34;);});obs$.set(true);endBatch();// Tobatch(  () => {    obs$.set(true);  },  () => {    console.log(&#34;done&#34;);  });"><div></div></button></div></figure></div>
<h2 id="023-to-10">0.23 to 1.0</h2>
<h3 id="onchange-changed">onChange changed</h3>
<ol>
<li>
<p><code dir="auto">onChange</code> now takes a second object parameter with <code dir="auto">trackingType</code> and <code dir="auto">initial</code> options. If you were using a second parameter (like <code dir="auto">true</code> to track shallowly) before, use <code dir="auto">{ trackingType: true }</code>.</p>
</li>
<li>
<p>The <code dir="auto">onChange</code> callback now receives an object with <code dir="auto">value</code>, <code dir="auto">getPrevious</code>, and <code dir="auto">changes</code> in it, replacing the previous multiple arguments.</p>
</li>
</ol>
<p>These changes allow for more flexibility - itâ€™s easier for callers who care about the changes but not the current value or previous values (like persistence plugins), and the new <code dir="auto">initial</code> option lets it behave more like <code dir="auto">observe</code> where it runs immediately instead of waiting for a change.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// Old</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">onChange</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--1:#403F53"><span style="--0:#D7DBE0">value</span><span style="--0:#D6DEEB">, </span><span style="--0:#D7DBE0">getPrevious</span><span style="--0:#D6DEEB">, </span><span style="--0:#D7DBE0">changes</span></span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=&gt;</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#809191;--1:#5E6578">// ...</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}, </span><span style="--0:#FF5874;--1:#A54A4A">true</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// New</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">onChange</span><span style="--0:#D6DEEB;--1:#403F53">(</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--1:#403F53"><span style="--0:#D6DEEB">{ </span><span style="--0:#D7DBE0">value</span><span style="--0:#D6DEEB">, </span><span style="--0:#D7DBE0">getPrevious</span><span style="--0:#D6DEEB">, </span><span style="--0:#D7DBE0">changes</span><span style="--0:#D6DEEB"> }</span></span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=&gt;</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#809191;--1:#5E6578">// ...</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">{ trackingType: </span><span style="--0:#FF5874;--1:#A54A4A">true</span><span style="--0:#D6DEEB;--1:#403F53"> }</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// Oldobs.onChange((value, getPrevious, changes) => {  // ...}, true);// Newobs.onChange(  ({ value, getPrevious, changes }) => {    // ...  },  { trackingType: true });"><div></div></button></div></figure></div>
<h3 id="when-and-show-tweaked">when and Show tweaked</h3>
<p>They were previously checking if the value is â€œreadyâ€, meaning it doesnâ€™t count if itâ€™s an empty object or empty array. They now do a standard javascript truthiness check as would be expected. For the previous behavior you can use <code dir="auto">whenReady</code> or <code dir="auto">&lt;Show ifReady={...}&gt;</code></p>
<h3 id="indexeddb-preloader-removed">IndexedDB preloader removed</h3>
<p>It was actually slower in our testing so we simplified things and just removed it. See <a href="../../guides/persistence#IndexedDB">IndexedDB</a> for up-to-date docs.</p>
<h2 id="022-to-023">0.22 to 0.23</h2>
<h3 id="setting-an-observable-object-to-the-same-value-no-longer-notifies">Setting an observable object to the same value no longer notifies</h3>
<p>Setting an object to itself was triggering notifications, which is not great for performance and is undesirable in most cases. It is now more targeted and will only notify on elements that actually changed. Itâ€™s unlikely that will affect you, but it may be a breaking change for you if you depended on things re-computing/re-rendering even if nothing changed.</p>
<h3 id="not-automatically-treating-dom-nodes-and-react-elements-as-opaque-objects">Not automatically treating DOM nodes and React elements as opaque objects</h3>
<p>It was adding most likely unnecessary extra code and is easily solved in a more generic way. If youâ€™re storing those in observables, wrap them in <code dir="auto">opaqueObject(...)</code>.</p>
<h3 id="indexeddb-plugin-support-for-non-dictionaries-removed">IndexedDB plugin support for non-dictionaries removed</h3>
<p>For flexibility of multiple observables persisting to the same IndexedDB table, it now has an <code dir="auto">itemID</code> option to save non-dictionaries. So the IndexedDB persistence plugin can be used in two ways:</p>
<ol>
<li>Persisting a dictionary where each value has an <code dir="auto">id</code> field, and each value will create a row in the table</li>
<li>Persisting multiple observables to their own rows in the table with the <code dir="auto">itemID</code> option</li>
</ol>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">settings</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">observable</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8D46B4">{ theme: </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">light</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#C792EA;--1:#8D46B4"> }</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">persistObservable</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">settings</span><span style="--0:#D6DEEB">, {</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">local: {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">name: </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">store</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">indexedDB: {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">itemID: </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">settings</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const settings = observable({ theme: &#34;light&#34; });persistObservable(settings, {  local: {    name: &#34;store&#34;,    indexedDB: {      itemID: &#34;settings&#34;,    },  },});"><div></div></button></div></figure></div>
<h2 id="021-to-022">0.21 to 0.22</h2>
<h3 id="local-storage-is-no-longer-the-default-persistence">Local Storage is no longer the default persistence</h3>
<p>This was changed to reduce build size for those who donâ€™t use it. If you want to use Local Storage, configure it at the beginning of your app:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> { configureObservablePersistence } </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state/persist</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> { ObservablePersistLocalStorage } </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state/local-storage</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">configureObservablePersistence</span><span style="--0:#D6DEEB;--1:#403F53">({</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">persistLocal: </span><span style="--0:#D7DBE0;--1:#403F53">ObservablePersistLocalStorage</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { configureObservablePersistence } from &#34;@legendapp/state/persist&#34;;import { ObservablePersistLocalStorage } from &#34;@legendapp/state/local-storage&#34;;configureObservablePersistence({  persistLocal: ObservablePersistLocalStorage,});"><div></div></button></div></figure></div>
<h3 id="moved-persist-plugins-to-persist-plugins">Moved persist plugins to <code dir="auto">/persist-plugins</code></h3>
<p>Update your import paths:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> { ObservablePersistLocalStorage } </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state/persist-plugins/local-storage</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> { ObservablePersistMMKV } </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state/persist-plugins/mmkv</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { ObservablePersistLocalStorage } from &#34;@legendapp/state/persist-plugins/local-storage&#34;;import { ObservablePersistMMKV } from &#34;@legendapp/state/persist-plugins/mmkv&#34;;"><div></div></button></div></figure></div>
<h3 id="when-is-not-triggered-by-empty--or"><code dir="auto">when</code> is not triggered by empty  or []</h3>
<p>If you wanted <code dir="auto">when</code> to be triggered by those, you can update it to use a selector to return a boolean like:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">obs</span><span style="--0:#C792EA;--1:#8D46B4"> = {}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">when</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=&gt;</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">!!</span><span style="--1:#403F53"><span style="--0:#D7DBE0">obs</span><span style="--0:#D6DEEB">, </span></span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=&gt;</span><span style="--0:#D6DEEB;--1:#403F53"> {</span><span style="--0:#7FDBCA;--1:#097174">...</span><span style="--0:#D6DEEB;--1:#403F53">})</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const obs = {}when(() => !!obs, () => {...})"><div></div></button></div></figure></div>
<h2 id="020-to-021">0.20 to 0.21</h2>
<h3 id="changed-onchange-callback">Changed <code dir="auto">onChange</code> callback</h3>
<p>The extra paremeters in the <code dir="auto">onChange</code> callback have changed to include an array of of the changes, fixing a bug where it was only showing the latest childâ€™s change when changing multiple children while batching. This likely wonâ€™t affect many of you as itâ€™s mostly intended for internal use and persistence plugins.</p>
<h2 id="renamed-react-components-from-legend-to-legend">Renamed React components from <code dir="auto">legend</code> to <code dir="auto">Legend</code></h2>
<p>We had originally used lower casing to match html elements, but in practice it did not autocomplete well and felt wrong. So just rename to uppercase, for example from <code dir="auto">&lt;legend.div /&gt;</code> to <code dir="auto">&lt;Legend.div /&gt;</code>.</p>
<h2 id="019-to-020">0.19 to 0.20</h2>
<h3 id="removed-deprecated-automatic-observing">Removed deprecated automatic observing</h3>
<p>The automatic observing from 0.18 was deprecated in 0.19 and is now removed. See <a href="#deprecated-automatic-observing">Deprecated automatic observing</a>.</p>
<h3 id="observe-and-useobserve">observe and useObserve</h3>
<p>As <code dir="auto">observe</code> has gotten more and more powerful, it outgrew modifying behavior based on the return value, so it now has an event parameter to control canceling listening and a cleanup function.</p>
<ul>
<li>If you were returning false to cancel observing, you can now use <code dir="auto">e.cancel = true</code>.</li>
<li>If you were returning a cleanup function you can use <code dir="auto">e.onCleanup = () =&gt; ...</code>.</li>
<li>It also adds a <code dir="auto">num</code> param to know how many times itâ€™s run and a <code dir="auto">previous</code> param to compare to the previous value.</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">observe</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">e</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=&gt;</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#809191;--1:#5E6578">// Cancel observing any future changes</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#097174">e</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">cancel</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FF5874;--1:#A54A4A">true</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#809191;--1:#5E6578">// A cleanup function</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#097174">e</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">cleanup</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=&gt;</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">...</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">})</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="observe((e) => {    // Cancel observing any future changes    e.cancel = true    // A cleanup function    e.cleanup = () => ...})"><div></div></button></div></figure></div>
<h3 id="renamed-event-dispatch-to-fire">Renamed event <code dir="auto">dispatch</code> to <code dir="auto">fire</code></h3>
<p>Just change <code dir="auto">evt.dispatch()</code> to <code dir="auto">evt.fire()</code> and all is good ðŸ‘.</p>
<h2 id="018-to-019">0.18 to 0.19</h2>
<h3 id="deprecated-automatic-observing">Deprecated automatic observing</h3>
<p>We are deprecating the automatic observing that depended on hooking into Reactâ€™s internals. Components will no longer track observables automatically, but you can easily it per component in a few ways:</p>
<ul>
<li>Wrap components in <code dir="auto">observer</code> to make them track automatically</li>
<li>Wrap observable access in <code dir="auto">useSelector</code> to return a value and track automatically.</li>
<li>Render observables directly into JSX.</li>
</ul>
<p>So tracking observables in React can look like this now:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> { observer } </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state/react</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">Component</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">observer</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8D46B4">function </span><span style="--0:#82AAFF;--1:#3C63B3">Component</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#C792EA;--1:#8D46B4"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8D46B4">  </span></span><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">value</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#7FDBCA;--1:#097174">observable</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">get</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#C792EA;--1:#8D46B4">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#809191;--1:#5E6578">// This tracks because it&#39;s inside an observer</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">}</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { observer } from &#34;@legendapp/state/react&#34;;const Component = observer(function Component() {  const value = observable.get();  // This tracks because it's inside an observer});"><div></div></button></div></figure></div>
<p>or</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> { useSelector } </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state/react</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">Component</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#809191;--1:#5E6578">// Track the value of an observable</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">value</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">useSelector</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">observable</span><span style="--0:#D6DEEB">);</span></span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#809191;--1:#5E6578">// Track the return value of a function</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">isSelected</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">useSelector</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#C792EA;--1:#8D46B4"> =&gt; </span><span style="--0:#D7DBE0;--1:#403F53">id</span><span style="--0:#C792EA;--1:#8D46B4"> === </span><span style="--0:#7FDBCA;--1:#097174">state</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#FAF39F;--1:#111111">selected</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">get</span><span style="--0:#D6DEEB;--1:#403F53">());</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { useSelector } from &#34;@legendapp/state/react&#34;;function Component() {  // Track the value of an observable  const value = useSelector(observable);  // Track the return value of a function  const isSelected = useSelector(() => id === state.selected.get());}"><div></div></button></div></figure></div>
<p>See <a href="../../react/react-introduction">the React guide</a> for how we suggest setting up your components now.</p>
<p>Rendering observables directly still works though, and <code dir="auto">enableLegendStateReact()</code> still enables that.</p>
<p>You can still enable the previous behavior for now with <code dir="auto">enableLegendStateReact({ autoTrackingDEPRECATED: true })</code> while you migrate to using <code dir="auto">observer</code> or <code dir="auto">useSelector</code>. That option will be removed before we reach 1.0.</p>
<h4 id="why">Why</h4>
<ul>
<li>It doesnâ€™t actually work. We thought this method would be safe to use because it was inspired by Preact Signals, but as weâ€™ve integrated Legend-State into more environments we found significant edge cases that seem to be unfixable and suggest that the whole concept is just unworkable.</li>
<li>The React team has asked us not to do it and made it clear that it is likely to break in a future version of React.</li>
<li>As Legend-State has evolved, the ideal way of using it has shifted towards fine-grained reactivity where components render minimally or only once, and we were actually specifically opting out of auto-tracking more often than not. So in the interest of pursuing the render-once ideal, we think itâ€™s actually generally better to use the <a href="../../react/fine-grained-reactivity">reactivity components</a> or opt-in to tracking.</li>
<li>We donâ€™t want to distract from the core mission of Legend-State with an unreliable and unstable core.</li>
</ul>
<h3 id="bindable-components-deprecated">Bindable components deprecated</h3>
<p>We now have a more general purpose way of making reactive props that can also be used for two-way binding for inputs. So change:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#8D46B4">&lt;</span><span style="--0:#F78C6C;--1:#AA0982">Bindable.input</span><span style="--0:#7FDBCA;--1:#8D46B4"> </span><span style="--0:#C5E478;--1:#3C63B3">bind</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#DD6B68;--1:#B73936">{</span><span style="--0:#D7DBE0;--1:#403F53">observable</span><span style="--0:#DD6B68;--1:#B73936">}</span><span style="--0:#7FDBCA;--1:#8D46B4"> /&gt;</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<Bindable.input bind={observable} />"><div></div></button></div></figure></div>
<p>to</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> { Legend } </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state/react-components</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#8D46B4">&lt;</span><span style="--0:#F78C6C;--1:#AA0982">legend.input</span><span style="--0:#7FDBCA;--1:#8D46B4"> </span><span style="--0:#C5E478;--1:#3C63B3">value$</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#DD6B68;--1:#B73936">{</span><span style="--0:#D7DBE0;--1:#403F53">observable</span><span style="--0:#DD6B68;--1:#B73936">}</span><span style="--0:#7FDBCA;--1:#8D46B4"> /&gt;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { Legend } from &#34;@legendapp/state/react-components&#34;;<legend.input value$={observable} />;"><div></div></button></div></figure></div>
<p>See <a href="../../react/fine-grained-reactivity">reactive props</a> for more detauls.</p>
<h3 id="value-is-no-longer-exposed"><code dir="auto">value</code> is no longer exposed</h3>
<p>Primitives no longer have a <code dir="auto">value</code> that you could access and modify. We had previously removed that from the documentation and it is now removed from the code. You can just <code dir="auto">get()</code> and <code dir="auto">set()</code> as you would any other observable. It turned out to cause more bugs than it was worth and made the TypeScript types overly complex.</p>
<h3 id="removed-getfalse">Removed get(false)</h3>
<p>Use <code dir="auto">peek()</code> instead.</p>
<h2 id="017-to-018">0.17 to 0.18</h2>
<p>The tracing functions are renamed to use* to be inline with hooks:</p>
<ul>
<li>useTraceListeners</li>
<li>useTraceUpdates</li>
<li>useVerifyNotTracking</li>
<li>useVerifyOneRender (new)</li>
</ul>
<h2 id="016-to-017">0.16 to 0.17</h2>
<h3 id="primitives-are-now-returned-as-observables">Primitives are now returned as observables</h3>
<p>Observables previously tried to be clever by returning primitives directly, which was great in making it easy to work with state directly. But especially as the goal has moved more towards fine-grained reactivity, the balance shifted towards observable objects being better. So accessing primitives through state now returns observables like anything else.</p>
<h4 id="raw-primitives">Raw primitives:</h4>
<ul>
<li>Pro: Easy to work with</li>
<li>Con: Required <code dir="auto">obs()</code> to get the observable to pass to props or render directly</li>
<li>Con: Easy to track a value without realizing it</li>
</ul>
<h4 id="observable-primitives">Observable primitives</h4>
<ul>
<li>Pro: More consistent</li>
<li>Pro: Easier to deal with undefined</li>
<li>Pro: Can dot through undefined paths easily</li>
<li>Pro: Doesnâ€™t need <code dir="auto">obs()</code> or set by key</li>
<li>Pro: Easier to use fine-grained features without <code dir="auto">obs()</code> everywhere</li>
<li>Pro: Easier to pass as props without needing <code dir="auto">obs()</code></li>
<li>Con: Requires <code dir="auto">get()</code> for primitives</li>
</ul>
<h4 id="changes-to-make">Changes to make:</h4>
<p><strong>get()</strong></p>
<p>Wherever you were accessing primitives directly, add a <code dir="auto">.get()</code> to the end of it.</p>
<p><strong>set(key, value)</strong></p>
<p>Change set by key to access the node first. It will now work fine if the node is undefined.</p>
<p>From: <code dir="auto">state.profile.set(&#39;name&#39;, &#39;Annyong&#39;)</code></p>
<p>To:Â Â Â Â Â <code dir="auto">state.profile.name.set(&#39;Annyong&#39;)</code></p>
<p><strong>obs()</strong></p>
<p>Just remove it. The default behavior is now the same as what <code dir="auto">obs()</code> did before.</p>
<h3 id="hooks-renamed">Hooks renamed</h3>
<p><code dir="auto">useComputed</code> is now <code dir="auto">useSelector</code>, re-rendering only when the return value changes.</p>
<p><code dir="auto">useComputed</code> now returns a <code dir="auto">computed</code> observable.</p>
<h2 id="015-to-016">0.15 to 0.16</h2>
<h3 id="enablelegendstatereact-to-observe-removed-observer">enableLegendStateReact() to observe, removed observer</h3>
<p>Legend-State now automatically tracks observable access in any component. To set it up, just call <code dir="auto">enableLegendStateReact()</code> at the beginning of your app.</p>
<p>Now <code dir="auto">observer</code> is no longer needed, so just remove all usage of <code dir="auto">observer</code>.</p>
<h2 id="014-to-015">0.14 to 0.15</h2>
<h3 id="safety">Safety</h3>
<p>There are now three levels of safety: <strong>Unsafe</strong>, <strong>Default</strong>, and <strong>Safe</strong>. Default is new and allows direct assignment to primitives but prevents directly assigning to everything else. The previous default behavior was Unsafe so you may see errors if you were directly assigning to objects/arrays/etcâ€¦ TypeScript should show errors so it should be easy to find them. Replace those with <code dir="auto">.set(...)</code> or pass in <code dir="auto">false</code> as the second parameter to <code dir="auto">observable</code> to go back to â€œUnsafeâ€ mode.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// 1. Unsafe: Use false for the previous unsafe behavior</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">obs</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">observable</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8D46B4">{ </span><span style="--0:#7FDBCA;--1:#097174">...</span><span style="--0:#C792EA;--1:#8D46B4"> }, </span><span style="--0:#809191;--1:#616671">/*safe*/</span><span style="--0:#C792EA;--1:#8D46B4"> </span><span style="--0:#FF5874;--1:#A54A4A">false</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// 2. Default: The new default behavior prevent directly assigning to objects, but allows directly assining to primitives</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">obs</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">observable</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8D46B4">{ text: </span><span style="--0:#D9F5DD;--1:#111111">&#39;</span><span style="--0:#ECC48D;--1:#9B504E">hello</span><span style="--0:#D9F5DD;--1:#111111">&#39;</span><span style="--0:#C792EA;--1:#8D46B4">,  obj: {} }</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">text</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&#39;</span><span style="--0:#ECC48D;--1:#9B504E">hi</span><span style="--0:#D9F5DD;--1:#111111">&#39;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// âœ… Setting a primitive works in default mode but not in safe mode.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">obj</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> {}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// âŒ Error. Cannot assign to objects directly.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// 3. Safe: Safe mode prevents all direct assignment</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">obs</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">observable</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8D46B4">{ text: </span><span style="--0:#D9F5DD;--1:#111111">&#39;</span><span style="--0:#ECC48D;--1:#9B504E">hello</span><span style="--0:#D9F5DD;--1:#111111">&#39;</span><span style="--0:#C792EA;--1:#8D46B4">,  obj: {} }, </span><span style="--0:#809191;--1:#616671">/*safe*/</span><span style="--0:#FF5874;--1:#A54A4A">true</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">text</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&#39;</span><span style="--0:#ECC48D;--1:#9B504E">hi</span><span style="--0:#D9F5DD;--1:#111111">&#39;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// âŒ Error. Cannot assign directly in safe mode.</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// 1. Unsafe: Use false for the previous unsafe behaviorconst obs = observable({ ... }, /*safe*/ false)// 2. Default: The new default behavior prevent directly assigning to objects, but allows directly assining to primitivesconst obs = observable({ text: 'hello',  obj: {} })obs.text = 'hi'// âœ… Setting a primitive works in default mode but not in safe mode.obs.obj = {}// âŒ Error. Cannot assign to objects directly.// 3. Safe: Safe mode prevents all direct assignmentconst obs = observable({ text: 'hello',  obj: {} }, /*safe*/true)obs.text = 'hi'// âŒ Error. Cannot assign directly in safe mode."><div></div></button></div></figure></div>
<h3 id="renamed-ref-to-obs">Renamed ref to obs</h3>
<p><code dir="auto">ref</code> was a bit unclear and conflicted with React - the new feature to <a href="../../react/fine-grained-reactivity/#render-an-observable-directly">directly render observables</a> requires a <code dir="auto">ref</code> property. So it is now renamed to <code dir="auto">obs</code>, which feels more intuitive as it is used to get an observable.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">state$</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">observable</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8D46B4">{ text: </span><span style="--0:#D9F5DD;--1:#111111">&quot;&quot;</span><span style="--0:#C792EA;--1:#8D46B4"> }</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// Before</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">textRef</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#7FDBCA;--1:#097174">state$</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">ref</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">text</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">textRef2</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#7FDBCA;--1:#097174">state$</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#FAF39F;--1:#111111">text</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">ref</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// Now</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">textObs</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">obs</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">text</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">textObs2</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#FAF39F;--1:#111111">text</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">obs</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const state$ = observable({ text: &#34;&#34; });// Beforeconst textRef = state$.ref(&#34;text&#34;);const textRef2 = state$.text.ref();// Nowconst textObs = obs.obs(&#34;text&#34;);const textObs2 = obs.text.obs();"><div></div></button></div></figure></div>
<h3 id="array-optimizations">Array optimizations</h3>
<p>The array optimizations are now opt-in, because they are only useful in React and can potentially have some unexpected behavior in React if modifying the DOM externally. You can enable them by using the <code dir="auto">For</code> component with the <code dir="auto">optimized</code> prop. See <a href="../arrays">Arrays</a> for more.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">obs</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">observable</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8D46B4">{ items:</span><span style="--0:#D6DEEB;--1:#403F53"> []</span><span style="--0:#C792EA;--1:#8D46B4"> }</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">Row</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">observer</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8D46B4">function </span><span style="--0:#82AAFF;--1:#3C63B3">Row</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#C792EA;--1:#8D46B4">{ </span><span style="--0:#D7DBE0;--1:#403F53">item</span><span style="--0:#C792EA;--1:#8D46B4"> }</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#C792EA;--1:#8D46B4"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8D46B4">  </span></span><span style="--0:#C792EA;--1:#8D46B4">return </span><span style="--0:#7FDBCA;--1:#8D46B4">&lt;</span><span style="--0:#CAECE6;--1:#8D46B4">div</span><span style="--0:#7FDBCA;--1:#8D46B4">&gt;</span><span style="--0:#DD6B68;--1:#B73936">{</span><span style="--0:#7FDBCA;--1:#097174">item</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">text</span><span style="--0:#DD6B68;--1:#B73936">}</span><span style="--1:#8D46B4"><span style="--0:#7FDBCA">&lt;/</span><span style="--0:#CAECE6">div</span><span style="--0:#7FDBCA">&gt;</span><span style="--0:#C792EA">;</span></span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">}</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">List</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">observer</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8D46B4">function </span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#C792EA;--1:#8D46B4"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#809191;--1:#5E6578">// The optimized prop enables the optimizations which were previously default</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8D46B4">  </span></span><span style="--0:#C792EA;--1:#8D46B4">return </span><span style="--0:#7FDBCA;--1:#8D46B4">&lt;</span><span style="--0:#F78C6C;--1:#AA0982">For</span><span style="--0:#7FDBCA;--1:#8D46B4"> </span><span style="--0:#C5E478;--1:#3C63B3">each</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#DD6B68;--1:#B73936">{</span><span style="--0:#D7DBE0;--1:#403F53">list</span><span style="--0:#DD6B68;--1:#B73936">}</span><span style="--0:#7FDBCA;--1:#8D46B4"> </span><span style="--0:#C5E478;--1:#3C63B3">item</span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#DD6B68;--1:#B73936">{</span><span style="--0:#D7DBE0;--1:#403F53">Row</span><span style="--0:#DD6B68;--1:#B73936">}</span><span style="--0:#7FDBCA;--1:#8D46B4"> </span><span style="--0:#C5E478;--1:#3C63B3">optimized</span><span style="--1:#8D46B4"><span style="--0:#7FDBCA"> /&gt;</span><span style="--0:#C792EA">;</span></span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">}</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const obs = observable({ items: [] });const Row = observer(function Row({ item }) {  return <div>{item.text}</div>;});const List = observer(function () {  // The optimized prop enables the optimizations which were previously default  return <For each={list} item={Row} optimized />;});"><div></div></button></div></figure></div>
<h3 id="shallow">Shallow</h3>
<p>Since thereâ€™s now a additionally the <code dir="auto">optimized</code> tracking for arrays, the shallow option on <code dir="auto">get()</code> and <code dir="auto">obs()</code> now has another option. So instead of passing <code dir="auto">shallow</code> to an observable, use the <code dir="auto">Tracking</code> namespace now.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> { Tracking } </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">obs</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">observable</span><span style="--0:#D6DEEB;--1:#403F53">([]);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// Before</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">get</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">shallow</span><span style="--0:#D6DEEB">);</span></span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// Now</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">get</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#097174">Tracking</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">shallow</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { Tracking } from &#34;@legendapp/state&#34;;const obs = observable([]);// Beforeobs.get(shallow);// Nowobs.get(Tracking.shallow);"><div></div></button></div></figure></div>
<h3 id="batching">Batching</h3>
<p>The <code dir="auto">observableBatcher</code> namespace is removed and the batching functions are now exported on their own.</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">begin/end</span></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> { batch, beginBatch, endBatch } </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&#39;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state</span><span style="--0:#D9F5DD;--1:#111111">&#39;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">beginBatch</span><span style="--0:#D6DEEB;--1:#403F53">()</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">obs1</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">set</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#097174">...</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">obs2</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">set</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#097174">...</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">endBatch</span><span style="--0:#D6DEEB;--1:#403F53">()</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// batch()</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">batch</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=&gt;</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#097174">obs1</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">set</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#097174">...</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#097174">obs2</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">set</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#097174">...</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { batch, beginBatch, endBatch } from '@legendapp/state'beginBatch()obs1.set(...)obs2.set(...)endBatch()// batch()batch(() => {    obs1.set(...)    obs2.set(...)}"><div></div></button></div></figure></div>
<h3 id="change-functions--observewhen">Change functions =&gt; observe/when</h3>
<p>The new <code dir="auto">observe</code> and <code dir="auto">when</code> functions can automatically track all observables accessed while running them. This made the old extra change utilities unnecessary, so <code dir="auto">onTrue</code>, <code dir="auto">onHasValue</code>, <code dir="auto">onEquals</code>, and <code dir="auto">onChangeShallow</code> have been removed, saving 200 bytes (7%) from the bundle size. These are the new equivalents:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> { observe, when } </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">obs</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">observable</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8D46B4">{ value: </span><span style="--0:#82AAFF;--1:#3C63B3">undefined</span><span style="--0:#C792EA;--1:#8D46B4"> }</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// onTrue</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#FAF39F;--1:#111111">value</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">onTrue</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">handler</span><span style="--0:#D6DEEB">);</span></span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// New onTrue equivalent</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">when</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=&gt;</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">value</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">===</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FF5874;--1:#A54A4A">true</span><span style="--1:#403F53"><span style="--0:#D6DEEB">, </span><span style="--0:#D7DBE0">handler</span><span style="--0:#D6DEEB">);</span></span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// onHasValue</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#FAF39F;--1:#111111">value</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">onHasValue</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">text</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--1:#403F53"><span style="--0:#D6DEEB">, </span><span style="--0:#D7DBE0">handler</span><span style="--0:#D6DEEB">);</span></span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// onHasValue equivalent</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">when</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=&gt;</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">value</span><span style="--1:#403F53"><span style="--0:#D6DEEB">, </span><span style="--0:#D7DBE0">handler</span><span style="--0:#D6DEEB">);</span></span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// onEquals</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#FAF39F;--1:#111111">value</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">onEquals</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">text</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--1:#403F53"><span style="--0:#D6DEEB">, </span><span style="--0:#D7DBE0">handler</span><span style="--0:#D6DEEB">);</span></span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// onEquals equivalent</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">when</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=&gt;</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">value</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">===</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">text</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--1:#403F53"><span style="--0:#D6DEEB">, </span><span style="--0:#D7DBE0">handler</span><span style="--0:#D6DEEB">);</span></span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// onChangeShallow</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#FAF39F;--1:#111111">value</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">onChangeShallow</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">handler</span><span style="--0:#D6DEEB">);</span></span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// onChangeShallow equivalent</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#FAF39F;--1:#111111">value</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">onChange</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">handler</span><span style="--0:#D6DEEB">, { shallow: </span></span><span style="--0:#FF5874;--1:#A54A4A">true</span><span style="--0:#D6DEEB;--1:#403F53"> });</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { observe, when } from &#34;@legendapp/state&#34;;const obs = observable({ value: undefined });// onTrueobs.value.onTrue(handler);// New onTrue equivalentwhen(() => obs.value === true, handler);// onHasValueobs.value.onHasValue(&#34;text&#34;, handler);// onHasValue equivalentwhen(() => obs.value, handler);// onEqualsobs.value.onEquals(&#34;text&#34;, handler);// onEquals equivalentwhen(() => obs.value === &#34;text&#34;, handler);// onChangeShallowobs.value.onChangeShallow(handler);// onChangeShallow equivalentobs.value.onChange(handler, { shallow: true });"><div></div></button></div></figure></div>
<h3 id="primitive-current--value">Primitive current =&gt; value</h3>
<p>Primitive observables are now wrapped in <code dir="auto">{ value }</code> instead of <code dir="auto">{ current }</code>. You can also now modify the <code dir="auto">value</code> directly.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">obs</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">observable</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// Before</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">current</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">===</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">curent</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">20</span><span style="--0:#D6DEEB;--1:#403F53">; </span><span style="--0:#809191;--1:#5E6578">// âŒ Error</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// Now</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">value</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">===</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#097174">obs</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">value</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">20</span><span style="--0:#D6DEEB;--1:#403F53">; </span><span style="--0:#809191;--1:#5E6578">// âœ… Works</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const obs = observable(10);// Beforeobs.current === 10;obs.curent = 20; // âŒ Error// Nowobs.value === 10;obs.value = 20; // âœ… Works"><div></div></button></div></figure></div>
<h3 id="renamed-observablecomputed-and-observableevent">Renamed observableComputed and observableEvent</h3>
<p><code dir="auto">observableComputed</code> is now just <code dir="auto">computed</code> and <code dir="auto">observableEvent</code> is now just <code dir="auto">event</code>.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> { computed, event } </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&#39;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state</span><span style="--0:#D9F5DD;--1:#111111">&#39;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// Before</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">value</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">observableComputed</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#C792EA;--1:#8D46B4"> =&gt; </span><span style="--0:#7FDBCA;--1:#097174">...</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// Now</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">value</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">computed</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#C792EA;--1:#8D46B4"> =&gt; </span><span style="--0:#7FDBCA;--1:#097174">...</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// Before</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">evt</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">observableEvent</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#C792EA;--1:#8D46B4"> =&gt; </span><span style="--0:#7FDBCA;--1:#097174">...</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// Now</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">evt</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">event</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#C792EA;--1:#8D46B4"> =&gt; </span><span style="--0:#7FDBCA;--1:#097174">...</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { computed, event } from '@legendapp/state'// Beforeconst value = observableComputed(() => ...)// Nowconst value = computed(() => ...)// Beforeconst evt = observableEvent(() => ...)// Nowconst evt = event(() => ...)"><div></div></button></div></figure></div>
<h3 id="renamed-ls-to-bindable">Renamed LS to Bindable</h3>
<p>The automatically bound exports are now named better and in their own exports, so change your exports from <code dir="auto">LS</code> to:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// Web</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> { Bindable } </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state/react-components</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// React Native</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> { Bindable } </span><span style="--0:#C792EA;--1:#8D46B4">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#ECC48D;--1:#9B504E">@legendapp/state/react-native-components</span><span style="--0:#D9F5DD;--1:#111111">&quot;</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// Webimport { Bindable } from &#34;@legendapp/state/react-components&#34;;// React Nativeimport { Bindable } from &#34;@legendapp/state/react-native-components&#34;;"><div></div></button></div></figure></div>
<h3 id="renamed-isolate-to-computed">Renamed Isolate to Computed</h3>
<p>The control flow component <code dir="auto">Isolate</code> is renamed to <code dir="auto">Computed</code> for naming consistency.</p>
<h3 id="removed-memo-and-isolate-props">Removed memo and isolate props</h3>
<p>We found these confusing in practice as it wasnâ€™t super clear when a component was getting memoized, and itâ€™s not much extra work to use the Memo and Computed components directly. If you were using those, switch to the Computed and Memo components instead</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// Before</span></div></div><div class="ec-line"><div class="code"><span style="--1:#8D46B4"><span style="--0:#7FDBCA">&lt;</span><span style="--0:#CAECE6">div</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#3C63B3">memo</span><span style="--0:#7FDBCA;--1:#8D46B4">&gt;</span><span style="--0:#D6DEEB;--1:#403F53">...</span><span style="--1:#8D46B4"><span style="--0:#7FDBCA">&lt;/</span><span style="--0:#CAECE6">div</span><span style="--0:#7FDBCA">&gt;</span></span></div></div><div class="ec-line"><div class="code"><span style="--1:#8D46B4"><span style="--0:#7FDBCA">&lt;</span><span style="--0:#CAECE6">div</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#3C63B3">computed</span><span style="--0:#7FDBCA;--1:#8D46B4">&gt;</span><span style="--0:#D6DEEB;--1:#403F53">...</span><span style="--1:#8D46B4"><span style="--0:#7FDBCA">&lt;/</span><span style="--0:#CAECE6">div</span><span style="--0:#7FDBCA">&gt;</span></span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#5E6578">// Now</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#8D46B4">&lt;</span><span style="--0:#F78C6C;--1:#AA0982">Memo</span><span style="--1:#8D46B4"><span style="--0:#7FDBCA">&gt;&lt;</span><span style="--0:#CAECE6">div</span><span style="--0:#7FDBCA">&gt;</span></span><span style="--0:#D6DEEB;--1:#403F53">...</span><span style="--1:#8D46B4"><span style="--0:#7FDBCA">&lt;/</span><span style="--0:#CAECE6">div</span><span style="--0:#7FDBCA">&gt;&lt;/</span></span><span style="--0:#F78C6C;--1:#AA0982">Memo</span><span style="--0:#7FDBCA;--1:#8D46B4">&gt;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#8D46B4">&lt;</span><span style="--0:#F78C6C;--1:#AA0982">Computed</span><span style="--1:#8D46B4"><span style="--0:#7FDBCA">&gt;&lt;</span><span style="--0:#CAECE6">div</span><span style="--0:#7FDBCA">&gt;</span></span><span style="--0:#D6DEEB;--1:#403F53">...</span><span style="--1:#8D46B4"><span style="--0:#7FDBCA">&lt;/</span><span style="--0:#CAECE6">div</span><span style="--0:#7FDBCA">&gt;&lt;/</span></span><span style="--0:#F78C6C;--1:#AA0982">Computed</span><span style="--0:#7FDBCA;--1:#8D46B4">&gt;</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// Before<div memo>...</div><div computed>...</div>// Now<Memo><div>...</div></Memo><Computed><div>...</div></Computed>"><div></div></button></div></figure></div> </div> <footer class="astro-3yyafb3n"> <div class="meta sl-flex astro-3yyafb3n"> <a href="https://github.com/LegendApp/legend-docs/edit/main/packages/state/src/content/docs/other/migrating.mdx" class="sl-flex astro-eez2twj6"><svg aria-hidden="true" class="astro-eez2twj6 astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.2em;"><path d="M22 7.24a1 1 0 0 0-.29-.71l-4.24-4.24a1 1 0 0 0-1.1-.22 1 1 0 0 0-.32.22l-2.83 2.83L2.29 16.05a1 1 0 0 0-.29.71V21a1 1 0 0 0 1 1h4.24a1 1 0 0 0 .76-.29l10.87-10.93L21.71 8c.1-.1.17-.2.22-.33a1 1 0 0 0 0-.24v-.14l.07-.05ZM6.83 20H4v-2.83l9.93-9.93 2.83 2.83L6.83 20ZM18.17 8.66l-2.83-2.83 1.42-1.41 2.82 2.82-1.41 1.42Z"/></svg> Edit page</a>  </div> <div class="pagination-links astro-u2l5gyhi" dir="ltr"> <a href="/open-source/state/v3/other/experiments/" rel="prev" class="astro-u2l5gyhi"> <svg aria-hidden="true" class="astro-u2l5gyhi astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17 11H9.41l3.3-3.29a1.004 1.004 0 1 0-1.42-1.42l-5 5a1 1 0 0 0-.21.33 1 1 0 0 0 0 .76 1 1 0 0 0 .21.33l5 5a1.002 1.002 0 0 0 1.639-.325 1 1 0 0 0-.219-1.095L9.41 13H17a1 1 0 0 0 0-2Z"/></svg>  <span class="astro-u2l5gyhi"> Previous <br class="astro-u2l5gyhi"> <span class="link-title astro-u2l5gyhi">Experiments</span> </span> </a>  </div>  </footer>  </div> </div>   </main> </div> </div>  </div> </div>  </body></html>